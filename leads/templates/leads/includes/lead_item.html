{% comment %}
Parameters:
    lead, lead item to be rendered
{% endcomment %}

{% load static %}

<div class="card shadow-sm mt-4">
    <div class="card-header">
        <div class="card-title align-items-start flex-column">
            <div class="d-flex align-items-center">
                <div class="symbol symbol-45px me-5">
                    {% include 'leads/includes/avatar.html' with user=lead.author %}
                </div>
                <div class="d-flex justify-content-start flex-column">
                    {% include 'leads/includes/avatar_details.html' with user=lead.author %}
                </div>
            </div>
        </div>
        <div class="card-toolbar">
            <span class="text-muted">{{ lead.age_desc }}</span>
        </div>
    </div>

    <div class="card-body">
        <div class="text-dark">{{ lead.body|linebreaks }}</div>
        <div class="d-flex justify-content-between mt-2">
            <div>
                {% include 'leads/includes/lead_badges.html' with lead=lead %}
            </div>
            <div>
                <span class="badge badge-light" data-bs-toggle="tooltip" data-bs-placement="bottom"{% if request.user.is_authenticated and request.user.user.id == lead.author.id %} title="{% include 'leads/includes/tooltips/leads/x_users_contacted_you.txt' with count=lead.num_contacts %}"{% else %}title="{% include 'leads/includes/tooltips/leads/x_users_contacted_author.txt' with count=lead.num_contacts %}"{% endif %}>{{ lead.num_contacts }} Contacts</span>
            </div>
        </div>
    </div>

    <div class="card-footer">
        <div class="d-flex justify-content-between">
            <div>
                {% if not request.user.is_authenticated or request.user.user.id != lead.author.id %}
                    <a href="#" class="btn btn-light-warning btn-sm" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Mark as spam to help other users.">Spam <span class="badge badge-warning ms-1">5</span></a>
                    <a href="#" class="btn btn-active-light-warning btn-sm text-warning" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Mark as spam to help other users.">Spam <span class="badge badge-warning ms-1">5</span></a>
                    <a href="#" class="btn btn-light-danger btn-sm ms-1" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Mark as scam to warn other users.">Scam <span class="badge badge-danger ms-1">2</span></a>
                    <a href="#" class="btn btn-active-light-danger btn-sm text-danger ms-1" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Mark as scam to warn other users.">Scam <span class="badge badge-danger ms-1">2</span></a>

                    {% comment %} <a href="#" class="btn btn-light-danger btn-sm"><i class="bi bi-hand-thumbs-down"></i> Bad <span class="badge badge-danger ms-1">2</span></a> {% endcomment %}
                    {% comment %} <a href="#" class="btn btn-active-light-danger btn-sm text-danger ms-2"><i class="bi text-danger bi-hand-thumbs-down"></i> Spam or Scam <span class="badge badge-danger ms-1">2</span></a> {% endcomment %}
                    {% comment %} <a href="#" class="btn btn-outline btn-outline-dashed btn-outline-danger btn-active-light-danger btn-sm ms-1">Scam <span class="badge badge-danger ms-1">2</span></a> {% endcomment %}
                    {% comment %} <a href="#" class="btn btn-outline btn-outline-dashed btn-outline-warning btn-active-light-warning btn-sm">Spam <span class="badge badge-warning ms-1">5</span></a> {% endcomment %}
                {% endif %}
            </div>
            {% if request.user.is_authenticated and request.user.user is not None and request.user.user.id == lead.author.id %}
                <a href="{% url 'leads:lead_detail' lead.id %}" class="btn btn-light-info btn-sm">Details</a>
            {% else %}

            <div>
                <a href="{% url 'leads:contact_lead' lead.id %}" class="btn btn-primary btn-sm">Contact</a>
                {% comment %} <span class="bg-light text-muted btn-sm fw-bold" data-bs-toggle="tooltip" data-bs-placement="bottom" title="You've contacted this user.">Contacted</span> {% endcomment %}
            </div>
                
            {% endif %}
        </div>
    </div>
</div>