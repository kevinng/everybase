{% extends 'extendables/b.html' %}

{% load static %}

{% block page_title %}Contact Lead Author{% endblock %}

{% block page_subtitle %}{{ lead.body|truncatechars:100 }}{% endblock %}

{% block actions%}
{% include 'leads/includes/toolbar_actions.html' %}
{% endblock %}

{% block content_body %}
{% comment %} <form action="{% url 'leads:contact_lead' lead.id %}" method="post" id="contact_lead_form"> {% endcomment %}
{% csrf_token %}
<div class="post d-flex flex-column-fluid" id="kt_post">
    <div id="kt_content_container" class="container-xxl">
        <div class="card shadow-sm">
            <div class="card-header">
                <div class="card-title align-items-start flex-column">
                    <div class="d-flex align-items-center">
                        <div class="symbol symbol-45px me-5">
                            <div class="symbol-label fs-3 bg-light-primary text-primary">KN</div>
                        </div>
                        <div class="d-flex justify-content-start flex-column">
                            <div class="text-dark fw-bolder fs-6">Kevin Ng<span class="text-muted fw-bold fs-7 ms-2">Singapore</span>
                                <span class="svg-icon svg-icon-success svg-icon-2" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Verified with phone number country code +1">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="10" fill="currentColor"/>
                                    <path d="M10.4343 12.4343L8.75 10.75C8.33579 10.3358 7.66421 10.3358 7.25 10.75C6.83579 11.1642 6.83579 11.8358 7.25 12.25L10.2929 15.2929C10.6834 15.6834 11.3166 15.6834 11.7071 15.2929L17.25 9.75C17.6642 9.33579 17.6642 8.66421 17.25 8.25C16.8358 7.83579 16.1642 7.83579 15.75 8.25L11.5657 12.4343C11.2533 12.7467 10.7467 12.7467 10.4343 12.4343Z" fill="currentColor"/>
                                    </svg>
                                </span>
                            </div>
                            <div class="fw-normal fs-7">I supply medical supplies, resources, etc, etc.</div>
                        </div>
                    </div>
                </div>
                <div class="card-toolbar">
                    <span class="text-muted">2d ago</span>
                </div>
            </div>
        
            <div class="card-body">
                <div class="text-dark">Hello world, hello world</div>

                <div class="mt-2">
                    <span class="badge badge-secondary" data-bs-toggle="tooltip" data-bs-placement="bottom" title="{% include 'leads/includes/tooltips/leads/sales_agent.txt' %}">Sales Agent</span>
                </div>

                <div class="separator my-4"></div>


                {% comment %} We don't need the following, just direct to login/register {% endcomment %}
                {% comment %} <h5>Login or Register to Contact Lead Author</h5>

                <button class="btn btn-light-primary">Login</button><button class="btn btn-primary ms-2">Register</button> {% endcomment %}

                {% comment %} <div>Registration is free.</div> {% endcomment %}




                {% comment %} <br><br> {% endcomment %}



                {% comment %} <h5>Contact Lead Author</h5> {% endcomment %}

{% comment %}
If friends
Show all communication methods? I can simply redirect after add contact, he'll have access to all the contact methods.
He'll receive a note that contact has been sent.

If not friends,
I can simply redirect after add contact, he'll receive a note that a friend request has been sent.
{% endcomment %}

                <div class="form-floating col-lg-6 mt-4">
                    <textarea class="form-control" data-kt-autosize="true" maxlength="100" placeholder="Comments" id="comments" name="comments"></textarea>
                    <label for="comments">Comments</label>
                </div>
                
                {% comment %} {% if lead.lead_type == 'selling' %} {% endcomment %}
                selling
                    <div id="to_selling_as_sales_agent_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_selling_as_sales_agent" id="to_selling_as_sales_agent" {% if form.to_selling_as_sales_agent.value == True %}checked {% endif %}/>
                        <label for="to_selling_as_sales_agent">
                            {% include 'leads/includes/badges/leads/sales_agent.html' %}
                        </label>
                    </div>

                    <div id="to_selling_as_sourcing_goods_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_selling_as_sourcing_goods" id="to_selling_as_sourcing_goods" {% if form.to_selling_as_sourcing_goods.value == True %}checked {% endif %}/>
                        <label for="to_selling_as_sourcing_goods">
                            {% include 'leads/includes/badges/leads/sourcing_goods.html' %}
                        </label>
                    </div>

                    <div id="to_selling_as_other_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_selling_as_other" id="to_selling_as_other" {% if form.to_selling_as_other.value == True %}checked {% endif %}/>
                        <label for="to_selling_as_other">
                            {% include 'leads/includes/badges/leads/other.html' %}
                        </label>
                    </div>
                
                buying
                {% comment %} {% elif lead.lead_type == 'buying' %} {% endcomment %}

                    <div id="to_buying_as_sourcing_agent_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_buying_as_sourcing_agent" id="to_buying_as_sourcing_agent" {% if form.to_buying_as_sourcing_agent.value == True %}checked {% endif %}/>
                        <label for="to_buying_as_sourcing_agent">
                            {% include 'leads/includes/badges/leads/sourcing_agent.html' %}
                        </label>
                    </div>

                    <div id="to_buying_as_promoting_goods_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_buying_as_promoting_goods" id="to_buying_as_promoting_goods" {% if form.to_buying_as_promoting_goods.value == True %}checked {% endif %}/>
                        <label for="to_buying_as_promoting_goods">
                            {% include 'leads/includes/badges/leads/promoting_goods.html' %}
                        </label>
                    </div>

                    <div id="to_buying_as_other_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_buying_as_other" id="to_buying_as_other" {% if form.to_buying_as_other.value == True %}checked {% endif %}/>
                        <label for="to_buying_as_other">
                            {% include 'leads/includes/badges/leads/other.html' %}
                        </label>
                    </div>
                
                sales agent
                {% comment %} {% elif lead.lead_type == 'sales_agent' %} {% endcomment %}

                    <div id="to_sales_agent_as_seeking_cooperation_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_sales_agent_as_seeking_cooperation" id="to_sales_agent_as_seeking_cooperation" {% if form.to_sales_agent_as_seeking_cooperation.value == True %}checked {% endif %}/>
                        <label for="to_sales_agent_as_seeking_cooperation">
                            {% include 'leads/includes/badges/contacts/seeking_cooperation_from_sales_agent.html' %}
                        </label>
                    </div>

                    <div id="to_sales_agent_as_sourcing_goods_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_sales_agent_as_sourcing_goods" id="to_sales_agent_as_sourcing_goods" {% if form.to_sales_agent_as_sourcing_goods.value == True %}checked {% endif %}/>
                        <label for="to_sales_agent_as_sourcing_goods">
                            {% include 'leads/includes/badges/leads/sourcing_goods.html' %}
                        </label>
                    </div>

                    <div id="to_sales_agent_as_other_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_sales_agent_as_other" id="to_sales_agent_as_other" {% if form.to_sales_agent_as_other.value == True %}checked {% endif %}/>
                        <label for="to_sales_agent_as_other">
                            {% include 'leads/includes/badges/leads/other.html' %}
                        </label>
                    </div>
                
                sourcing agent
                {% comment %} {% elif lead.lead_type == 'sourcing_agent' %} {% endcomment %}

                    <div id="to_sourcing_agent_as_seeking_cooperation_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_sourcing_agent_as_seeking_cooperation" id="to_sourcing_agent_as_seeking_cooperation" {% if form.to_sourcing_agent_as_seeking_cooperation.value == True %}checked {% endif %}/>
                        <label for="to_sourcing_agent_as_seeking_cooperation">
                            {% include 'leads/includes/badges/contacts/seeking_cooperation_from_sourcing_agent.html' %}
                        </label>
                    </div>

                    <div id="to_sourcing_agent_as_promoting_goods_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_sourcing_agent_as_promoting_goods" id="to_sourcing_agent_as_promoting_goods" {% if form.to_sourcing_agent_as_promoting_goods.value == True %}checked {% endif %}/>
                        <label for="to_sourcing_agent_as_promoting_goods">
                            {% include 'leads/includes/badges/leads/promoting_goods.html' %}
                        </label>
                    </div>

                    <div id="to_sourcing_agent_as_other_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_sourcing_agent_as_other" id="to_sourcing_agent_as_other" {% if form.to_sourcing_agent_as_other.value == True %}checked {% endif %}/>
                        <label for="to_sourcing_agent_as_other">
                            {% include 'leads/includes/badges/leads/other.html' %}
                        </label>
                    </div>
                
                logistics agent
                {% comment %} {% elif lead.lead_type == 'logistics_agent' %} {% endcomment %}

                    <div id="to_logistics_agent_as_need_logistics_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_logistics_agent_as_need_logistics" id="to_logistics_agent_as_need_logistics" {% if form.to_logistics_agent_as_need_logistics.value == True %}checked {% endif %}/>
                        <label for="to_logistics_agent_as_need_logistics">
                            {% include 'leads/includes/badges/leads/need_logistics.html' %}
                        </label>
                    </div>

                    <div id="to_logistics_agent_as_other_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_logistics_agent_as_other" id="to_logistics_agent_as_other" {% if form.to_logistics_agent_as_other.value == True %}checked {% endif %}/>
                        <label for="to_logistics_agent_as_other">
                            {% include 'leads/includes/badges/leads/other.html' %}
                        </label>
                    </div>

                need logistics
                {% comment %} {% elif lead.lead_type == 'need_logistics' %} {% endcomment %}

                    <div id="to_need_logistics_as_logistics_agent_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_need_logistics_as_logistics_agent" id="to_need_logistics_as_logistics_agent" {% if form.to_need_logistics_as_logistics_agent.value == True %}checked {% endif %}/>
                        <label for="to_need_logistics_as_logistics_agent">
                            {% include 'leads/includes/badges/leads/logistics_agent.html' %}
                        </label>
                    </div>

                    <div id="to_need_logistics_as_other_div" class="form-check form-check-custom mt-2">
                        <input class="form-check-input me-2" type="checkbox" name="to_need_logistics_as_other" id="to_need_logistics_as_other" {% if form.to_need_logistics_as_other.value == True %}checked {% endif %}/>
                        <label for="to_need_logistics_as_other">
                            {% include 'leads/includes/badges/leads/other.html' %}
                        </label>
                    </div>

                {% comment %} {% endif %} {% endcomment %}

                {% comment %} {% if form.non_field_errors %}
                    <div class="mt-6">
                    {% for err in form.non_field_errors %}
                        <div class="text-danger mt-2">{{ err }}</div>
                    {% endfor %}
                    </div>
                {% endif %} {% endcomment %}
            </div>

            <div class="card-footer">
                <div class="d-flex flex-row-reverse mt-4">
                    <button type="submit" class="btn btn-primary g-recaptcha"
                        data-sitekey="{{ settings.RECAPTCHA_SITE_KEY }}"
                        data-callback="contactLeadFormOnSubmit" 
                        data-action="submit">Contact</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% comment %} </form> {% endcomment %}
{% endblock %}

{% comment %}
$(document).ready(function() {
    via_wechat_id_div = $('#via_wechat_id_div')
    via_wechat = $('#via_wechat')

    function toggle_via_wechat_id_div() {
        if (via_wechat.is(':checked')) {
            via_wechat_id_div.show()
        } else {
            via_wechat_id_div.hide()
        }
    }

    toggle_via_wechat_id_div()

    via_wechat.click(function() {
        toggle_via_wechat_id_div()
    })
})

// ReCaptcha callback functions - outside $(document).ready.
function contactLeadFormOnSubmit(token) {
    document.getElementById("contact_lead_form").submit()
}
{% endcomment %}
{% block page_custom_javascript %}
<script src="{% static 'leads/js/contact_lead.js' %}"></script>
{% endblock %}