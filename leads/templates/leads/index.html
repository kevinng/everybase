{% extends 'extendables/base.html' %}

{% load static %}

{% load widget_tweaks %}

{% block title %}
    Everybase - Buy and Sell Chemical Slow-Moving Stock
{% endblock %}

{% block subtitle %}
    We Buy and Sell Chemical Slow Moving Stock <small>Sell It Quick, Buy It Cheap</small>
{% endblock %}

{% block content %}
    <form method="post" action="{% url 'leads:capture' %}">
        {% csrf_token %}
        <div class="kt-container kt-grid__item kt-grid__item--fluid">
            <div class="row">
                <div class="col-lg-4 d-none d-lg-block">
                    <div class="kt-portlet kt-portlet--mobile">
                        <div class="kt-portlet__body">
                            <img style="width: 100%; height: auto;" src="{% static 'leads/img/goods.png' %}" />  
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 d-block d-lg-none">
                    <div class="kt-portlet kt-portlet--mobile">
                        <div class="kt-portlet__body">
                            <img style="width: 100%; height: auto;" src="{% static 'leads/img/goods_mobile.png' %}" />  
                        </div>
                    </div>
                </div>

                <div class="col-lg-8">
                    <div class="kt-portlet kt-portlet--mobile">
                        <div class="kt-portlet__head kt-portlet__head--noborder">
                            <div class="kt-portlet__head-label">
                                <h3 class="kt-portlet__head-title">
                                    Sign-Up to Sell Slow-Moving Stock or Buy Cheap Chemical Goods
                                </h3>
                            </div>
                        </div>
                        <div class="kt-portlet__body">
                            <div class="row">
                                <div class="col-lg-2"></div>
                                <div class="form-group validated col-lg-8">
                                    <label class="form-control-label">Name</label>
                                    {{ form.name|add_class:"form-control"|add_error_class:"is-invalid"|attr:"placeholder:Your Name" }}
                                    {% if form.name.errors %}
                                        <div class="invalid-feedback">{% for error in form.name.errors %}{{ error }} {% endfor %}</div>
                                    {% endif %}
                                </div>
                                <div class="col-lg-2"></div>
                            </div>

                            <div class="row">
                                <div class="col-lg-2"></div>
                                <div class="form-group validated col-lg-8">
                                    <label class="form-control-label">Email</label>
                                    {{ form.email|add_class:"form-control"|add_class:"kt-selectpicker"|attr:"placeholder:Your Work Email" }}
                                    {% if form.email.errors %}
                                        <div class="invalid-feedback">{% for error in form.email.errors %}{{ error }} {% endfor %}</div>
                                    {% endif %}
                                </div>
                                <div class="col-lg-2"></div>
                            </div>

                            <div class="row">
                                <div class="col-lg-2"></div>
                                <div class="form-group validated col-lg-8">
                                    <label class="form-control-label">Chat App</label>
                                    <div class="kt-radio-inline">
                                        {{ form.chat_app|add_class:"form-control"|add_class:"kt-selectpicker" }}
                                        {% if form.chat_app.errors %}
                                            <div class="invalid-feedback">{% for error in form.chat_app.errors %}{{ error }} {% endfor %}</div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-lg-2"></div>
                            </div>

                            <div id="leads__whatsapp" class="row kt-hidden">
                                <div class="col-lg-2"></div>
                                <div class="form-group validated col-lg-8">
                                    <label class="form-control-label">WhatsApp Phone Number</label>
                                    {{ form.whatsapp_no|add_class:"form-control"|add_class:"kt-selectpicker"|attr:"placeholder:Your WhatsApp Phone Number" }}
                                    <span class="form-text text-muted">Please include area code</span>
                                    {% if form.whatsapp_no.errors %}
                                        <div class="invalid-feedback">{% for error in form.whatsapp_no.errors %}{{ error }} {% endfor %}</div>
                                    {% endif %}
                                </div>
                                <div class="col-lg-2"></div>
                            </div>

                            <div id="leads__wechat" class="row kt-hidden">
                                <div class="col-lg-2"></div>
                                <div class="form-group validated col-lg-8">
                                    <label class="form-control-label">WeChat Phone Number</label>
                                    {{ form.wechat_no|add_class:"form-control"|add_class:"kt-selectpicker"|attr:"placeholder:Your WeChat Phone Number" }}
                                    <span class="form-text text-muted">Please include area code</span>
                                    {% if form.wechat_no.errors %}
                                        <div class="invalid-feedback">{% for error in form.wechat_no.errors %}{{ error }} {% endfor %}</div>
                                    {% endif %}
                                </div>
                                <div class="col-lg-2"></div>
                            </div>

                            <div class="row">
                                <div class="col-lg-2"></div>
                                <div class="form-group validated col-lg-8">
                                    <label class="form-control-label">I Want To</label>
                                    {{ form.i_want_to|add_class:"form-control"|add_class:"kt-selectpicker" }}
                                    {% if form.i_want_to.errors %}
                                        <div class="invalid-feedback">{% for error in form.i_want_to.errors %}{{ error }} {% endfor %}</div>
                                    {% endif %}
                                </div>
                                <div class="col-lg-2"></div>
                            </div>

                            <div id="leads__i_am_interested_to_buy" class="row kt-hidden">
                                <div class="col-lg-2"></div>
                                <div class="form-group validated col-lg-8">
                                    <label class="form-control-label">I Am Interested to Buy</label>
                                    {{ form.i_am_interested_to_buy|add_class:"form-control"|attr:"rows:3"|attr:"placeholder:E.g. sodium chloride" }}
                                    {% if form.i_am_interested_to_buy.errors %}
                                        <div class="invalid-feedback">{% for error in form.i_am_interested_to_buy.errors %}{{ error }} {% endfor %}</div>
                                    {% endif %}
                                </div>
                                <div class="col-lg-2"></div>
                            </div>
                        </div>

                        <div class="kt-portlet__foot">
                            <div class="row">
                                <div class="col-lg-2"></div>
                                <div class="kt-form__actions col-lg-8">
                                    <button type="submit" class="btn btn-primary col-lg-12">Contact Me</button>
                                </div>
                                <div class="col-lg-2"></div>
                            </div>
                        </div>

                    </div>

                    <div class="kt-portlet kt-portlet--mobile">
                        <div class="kt-portlet__body">
                            <h5>You May Also Reach Us At</h5>
                            <div class="row kt-margin-t-50">
                                <div class="form-group col-lg-6">
                                    <label class="form-control-label">Email</label>
                                    <h5><a href="mailto:friend@everybase.co">friend@everybase.co</a></h5>
                                </div>
                                <div class="form-group col-lg-6">
                                    <label class="form-control-label">Phone</label>
                                    <h5><a href="tel:+6588933466">+65 88933466</a></h5>
                                    <span class="form-text text-muted">Call or contact us on <b>WhatsApp</b> and <b>WeChat</b></span>
                                </div>
                            </div>
                            <div class="row kt-margin-t-50">
                                <div class="form-group col-lg-6">
                                    <label class="form-control-label">Click to WhatsApp Us</label>
                                    <h5><a class="btn btn-success" href="https://wa.me/6588933466">WhatsApp +65 88933466</a></h5>
                                </div>
                                <div class="form-group col-lg-6">
                                    <label class="form-control-label">WeChat ID</label>
                                    <h5>everybase_support</h5>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
{% endblock %}

{% block page_level_scripts %}
    <script src="{% static 'common/assets/js/pages/crud/forms/widgets/bootstrap-select.js' %}" type="text/javascript"></script>
    <script type="text/javascript">
        // "Preferred Contact Method" selection
        var leads__chat_app = function () {
            var show_input = function () {
                var value = $("#id_chat_app").val();
                console.log(value);
                
                if (value == 'whatsapp') {
                    $('#leads__whatsapp').removeClass('kt-hidden');
                    $('#leads__wechat').addClass('kt-hidden');
                } else if (value == 'wechat') {
                    $('#leads__whatsapp').addClass('kt-hidden');
                    $('#leads__wechat').removeClass('kt-hidden');
                } else {
                    $('#leads__whatsapp').addClass('kt-hidden');
                    $('#leads__wechat').addClass('kt-hidden');
                }
            }

            var show_input_on_change = function () {
                $("#id_chat_app").change(function (input) {
                    show_input();
                });
            }

            return {
                run_once: function () {
                    show_input();
                },
                run_on_change: function () {
                    show_input_on_change(); 
                }
            };
        }();

        // "Role" selection
        var leads__role = function () {
            var show_input = function () {
                var value = $("#id_i_want_to").val();
                    
                if (value == 'buy') {
                    $('#leads__i_am_interested_to_buy').removeClass('kt-hidden');
                } else if (value == 'sell') {
                    $('#leads__i_am_interested_to_buy').addClass('kt-hidden');
                } else if (value == 'buy_sell') {
                    $('#leads__i_am_interested_to_buy').removeClass('kt-hidden');
                } else {
                    $('#leads__i_am_interested_to_buy').addClass('kt-hidden');
                }
            }

            var show_input_on_change = function () {
                $("#id_i_want_to").change(function (input) {
                    show_input();
                });
            }

            return {
                run_once: function () {
                    show_input();
                },
                run_on_change: function () {
                    show_input_on_change(); 
                }
            };
        }();

        // Call all functions on document ready
        jQuery(document).ready(function () {
            leads__chat_app.run_on_change();
            leads__chat_app.run_once();
            leads__role.run_on_change();
            leads__role.run_once();
        });
    </script>
{% endblock %}