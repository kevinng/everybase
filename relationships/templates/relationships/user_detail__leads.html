{% extends 'extendables/b.html' %}

{% load static %}

{% comment %} TODO: change title {% endcomment %}
{% block page_title %}My Leads{% endblock %}

{% block page_subtitle %}
<ul class="breadcrumb breadcrumb-separatorless fw-bold fs-7 my-1">
    {% comment %} TODO: change 'Me' {% endcomment %}
    <li class="breadcrumb-item text-muted">Me</li>
    <li class="breadcrumb-item">
        <span class="bullet bg-gray-300 w-5px h-2px"></span>
    </li>
    <li class="breadcrumb-item text-dark">Leads</li>
</ul>
{% endblock %}

{% block actions %}
{% include 'leads/includes/toolbar_actions.html' %}
{% endblock %}

{% block content_body %}
<div class="post d-flex flex-column-fluid" id="kt_post">
    <div id="kt_content_container" class="container-xxl">

        {% include 'relationships/includes/has_incomplete_profile.html' %}





        {% comment %} Remove this? {% endcomment %}
        {% comment %} <div id="kt_app_toolbar" class="app-toolbar">
            <!--begin::Toolbar container-->
            <div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
                <!--begin::Page title-->
                <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3"> {% endcomment %}
                    {% comment %} <!--begin::Title-->
                    <h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">Social Followers</h1>
                    <!--end::Title-->
                    <!--begin::Breadcrumb-->
                    <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
                        <!--begin::Item-->
                        <li class="breadcrumb-item text-muted">
                            <a href="/metronic8/demo1/../demo1/index.html" class="text-muted text-hover-primary">Home</a>
                        </li>
                        <!--end::Item-->
                        <!--begin::Item-->
                        <li class="breadcrumb-item">
                            <span class="bullet bg-gray-400 w-5px h-2px"></span>
                        </li>
                        <!--end::Item-->
                        <!--begin::Item-->
                        <li class="breadcrumb-item text-muted">Social</li>
                        <!--end::Item-->
                    </ul>
                    <!--end::Breadcrumb--> {% endcomment %}
                {% comment %} </div> {% endcomment %}
                <!--end::Page title-->
                <!--begin::Actions-->
                {% comment %} <div class="d-flex align-items-center gap-2 mb-4"> {% endcomment %}
                    {% comment %} <a href="#" class="btn btn-sm btn-flex bg-body btn-light fw-bold">Follow</a> {% endcomment %}
                    {% comment %} <a href="#" class="btn btn-sm fw-bold btn-primary">Add Friend</a> {% endcomment %}

                    {% comment %} <button class="btn btn-sm fw-bold btn-primary" disabled>Sent Friend Request</button> {% endcomment %}
                {% comment %} </div> {% endcomment %}
                <!--end::Actions-->
            {% comment %} </div> {% endcomment %}
            <!--end::Toolbar container-->
        {% comment %} </div> {% endcomment %}






        

        <div class="d-flex flex-column flex-lg-row">



            {% comment %} 
            Sidebar for connected user
            {% endcomment %}


            {% comment %} Start: Sidebar {% endcomment %}
            <div class="flex-column flex-lg-row-auto w-lg-250px w-xl-350px mb-5">

                <div class="card mb-5 shadow-sm">
                    <!--begin::Body-->
                    <div class="card-body pt-15 px-0">
                        <!--begin::Member-->
                        <div class="d-flex flex-column text-center mb-9">
                            <!--begin::Photo-->
                            {% comment %} <div class="symbol symbol-80px symbol-lg-150px mb-4"> {% endcomment %}
                                {% comment %} <img src="/metronic8/demo1/assets/media/avatars/300-3.jpg" class="" alt=""> {% endcomment %}
                            {% comment %} </div> {% endcomment %}

                            
                            <div class="d-flex flex-center flex-column">
                                <div class="symbol symbol-circle symbol-100px overflow-hidden mb-7">
                                    <div class="symbol-label fs-3 bg-light-info text-info">KN</div>
                                </div>
                                {% comment %} {% if do_not_render_contact_url != True %}<a href="{% url 'leads:contact_detail_private_notes' contact.id %}">{% endif %} {% endcomment %}
                                    <div class="fw-bolder fs-6">Kevin Ng</div>
                                    <div>Leng Guan Metal Pte Ltd</div>             

                                {% comment %} {% if do_not_render_contact_url != True %}</a>{% endif %} {% endcomment %}
                                <div>Singapore <span class="text-muted fw-bold text-muted fs-7">
                                    {% comment %} {% if contact.is_country_match_country_code %} {% endcomment %}
                                        {% comment %} Start: SVG icon | path: assets/media/icons/duotune/general/gen043.svg {% endcomment %}
                                        <span class="svg-icon svg-icon-success svg-icon-2" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Country verified with phone number country code +{{ contact.country.country_code }}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="10" fill="currentColor"/>
                                            <path d="M10.4343 12.4343L8.75 10.75C8.33579 10.3358 7.66421 10.3358 7.25 10.75C6.83579 11.1642 6.83579 11.8358 7.25 12.25L10.2929 15.2929C10.6834 15.6834 11.3166 15.6834 11.7071 15.2929L17.25 9.75C17.6642 9.33579 17.6642 8.66421 17.25 8.25C16.8358 7.83579 16.1642 7.83579 15.75 8.25L11.5657 12.4343C11.2533 12.7467 10.7467 12.7467 10.4343 12.4343Z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                        {% comment %} End: SVG icon {% endcomment %}
                                    {% comment %} {% endif %} {% endcomment %}
                                </span>
                                </div>

                                

                                

                                <span class="text-muted d-block fw-semibold">I supply textile, goods, resources.</span>

                                <a href="#" class="btn btn-sm fw-bold btn-primary mt-2">Add Friend</a>

                                <button class="btn btn-sm fw-bold btn-primary mt-2" disabled>Sent Friend Request</button>

                                <div class="text-gray-800 mt-2 px-8">You'll be able to access Kevin Ng's contacts - e.g. email, phone number - once Kevin Ng accepts your friend request.</div>

                            </div>
                        </div>
                        <!--end::Member-->





                        

                        
                        <!--begin::Row-->
                        {% comment %} <div class="row px-9"> {% endcomment %}



{% comment %}

Add tooltips

{% endcomment %}


                            {% comment %} <!--begin::Col-->
                            <div class="col-md-4 text-center" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Country verified with phone number country code +{{ contact.country.country_code }}">
                                <div class="text-gray-800 fw-bold fs-3">
                                    <span data-kt-countup="true" data-kt-countup-value="642">642</span>
                                </div>
                                <span class="text-gray-500 fs-8 d-block fw-bold">LEADS</span>
                            </div>
                            <!--end::Col-->
                            <!--begin::Col-->
                            <div class="col-md-4 text-center">
                                {% comment %} <a href="#"> {% endcomment %}
                                    {% comment %} <div class="text-gray-800 text-hover-primary fw-bold fs-3"> {% endcomment %}
                                    {% comment %} <div class="text-gray-800 fw-bold fs-3">
                                    <span data-kt-countup="true" data-kt-countup-value="24">24</span>K</div>
                                    <span class="text-gray-500 fs-8 d-block fw-bold">FRIENDS</span> {% endcomment %}
                                {% comment %} </a> {% endcomment %}
                            {% comment %} </div>
                            <!--end::Col-->
                            <!--begin::Col-->
                            <div class="col-md-4 text-center">
                                <div class="text-gray-800 fw-bold fs-3">
                                <span data-kt-countup="true" data-kt-countup-value="12">12</span>K</div>
                                <span class="text-gray-500 fs-8 d-block fw-bold">CONTACTED</span>
                            </div>
                            <!--end::Col-->
                        </div>  {% endcomment %}
                        <!--end::Row-->




                                                <!--begin::Row-->
                                                {% comment %} <div class="row px-9 mb-4">
                                                    <div class="col-md-2"></div> {% endcomment %}
                                                    <!--begin::Col-->
                                                    {% comment %} <div class="col-md-4 text-center">
                                                        <div class="text-gray-800 fw-bold fs-3">
                                                            <span data-kt-countup="true" data-kt-countup-value="642">642</span>
                                                        </div>
                                                        <span class="text-gray-500 fs-8 d-block fw-bold">CONTACTED</span>
                                                    </div> {% endcomment %}
                                                    <!--end::Col-->
                                                    <!--begin::Col-->
                                                    {% comment %} <div class="col-md-4 text-center">
                                                            <div class="text-gray-800 fw-bold fs-3">
                                                            <span data-kt-countup="true" data-kt-countup-value="24">24</span>K</div>
                                                            <span class="text-gray-500 fs-8 d-block fw-bold">REVIEWS</span>
                                                    </div> {% endcomment %}
                                                    <!--end::Col-->
                                                    <!--begin::Col-->
                                                    {% comment %} <div class="col-md-4 text-center">
                                                        <div class="text-gray-800 fw-bold fs-3">
                                                        <span data-kt-countup="true" data-kt-countup-value="12">12</span>K</div>
                                                        <span class="text-gray-500 fs-8 d-block fw-bold">FOLLOWING</span>
                                                    </div> {% endcomment %}
                                                    <!--end::Col-->
                                                    {% comment %} <div class="col-md-2"></div>
                                                </div> {% endcomment %}
                                                <!--end::Row-->




                                                
                    </div>
                    <!--end::Body-->
                </div>



                <div class="card mb-5 shadow-sm">
                    {% comment %} <div class="card-header">
                        <h3 class="card-title">Contact</h3>
                    </div> {% endcomment %}

                    <div class="card-body">
                        {% comment %} {% if contact.via_whatsapp == True %} {% endcomment %}
                            {% comment %} <div class="separator mt-4"></div> {% endcomment %}
                            <div class="d-flex flex-column flex-center mt-4">
                                {% comment %} <a href="{% url 'leads:redirect_contact_whatsapp' contact.id %}" class="btn btn-success">WhatsApp</a> {% endcomment %}
                                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#whatsapp_modal">WhatsApp</button>
                                {% comment %} <form action="{% url 'leads:redirect_contact_whatsapp' contact.id %}" method="post"> {% endcomment %}
                                <form action="" method="post">
                                {% csrf_token %}
                                <div class="modal bg-white fade" tabindex="-1" id="whatsapp_modal">
                                    <div class="modal-dialog modal-fullscreen">
                                        <div class="modal-content shadow-none">
                                            <div class="modal-header">
                                                <h5 class="modal-title">WhatsApp Lead Author</h5>
                                                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                                    <span class="svg-icon svg-icon-2x"></span>
                                                </div>
                                            </div>
                                
                                            <div class="modal-body">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="d-flex align-items-center">
                                                        <div class="symbol symbol-45px me-5">
                                                            {% include 'leads/includes/contact_avatar.html' with contact=contact %}
                                                        </div>
                                                        <div class="d-flex justify-content-start flex-column">
                                                            {% include 'leads/includes/contact_avatar_details.html' with contact=contact do_not_render_contact_url=True %}
                                                        </div>
                                                    </div>
                                                    <span class="text-muted">{{ contact.age_desc }}</span>
                                                </div>

                                                <div class="separator my-4"></div>

                                                <div class="d-flex justify-content-center">
                                                    <div class="col-lg-6">
                                                        <div class="form-floating mt-2">
                                                            <textarea class="form-control" data-kt-autosize="true" maxlength="100" placeholder="WhatsApp Message Body" id="whatsapp_body" name="whatsapp_body"></textarea>
                                                            <label for="whatsapp_body">WhatsApp Message Body</label>
                                                        </div>
                                                    
                                                        <div class="mt-2">
                                                            <button type="button" id="clear_whatsapp_body" class="btn btn-sm btn-light">Clear</button>
                                                            <button type="button" id="last_whatsapp_body" class="btn btn-sm btn-light ms-1">Last Message</button>
                                                            <button type="button" id="default_whatsapp_body" class="btn btn-sm btn-light ms-1">Default Message</button>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
                                                <button type="submit" class="btn btn-success">WhatsApp Lead Author</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </form>
                                <div id="whatsapp_qrcode" class="mt-2"></div>
                            </div>
                        {% comment %} {% endif %} {% endcomment %}

                        {% comment %} {% if contact.via_wechat == True %} {% endcomment %}
                            <div class="separator mt-4"></div>
                            <div class="d-flex flex-column flex-center mt-4">
                                {% comment %} <a href="{% url 'leads:redirect_contact_wechat' contact.id %}" class="btn btn-success mb-2">WeChat</a> {% endcomment %}
                                <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#wechat_modal">WeChat</button>
                                {% comment %} <form action="{% url 'leads:redirect_contact_wechat' contact.id %}" method="post"> {% endcomment %}
                                    
                                <form action="" method="">
                                {% csrf_token %}
                                <div class="modal bg-white fade" tabindex="-1" id="wechat_modal">
                                    <div class="modal-dialog modal-fullscreen">
                                        <div class="modal-content shadow-none">
                                            <div class="modal-header">
                                                <h5 class="modal-title">WeChat Lead Author</h5>
                                                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                                    <span class="svg-icon svg-icon-2x"></span>
                                                </div>
                                            </div>
                                
                                            <div class="modal-body">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="d-flex align-items-center">
                                                        <div class="symbol symbol-45px me-5">
                                                            {% include 'leads/includes/contact_avatar.html' with contact=contact %}
                                                        </div>
                                                        <div class="d-flex justify-content-start flex-column">
                                                            {% include 'leads/includes/contact_avatar_details.html' with contact=contact do_not_render_contact_url=True %}
                                                        </div>
                                                    </div>
                                                    <span class="text-muted">{{ contact.age_desc }}</span>
                                                </div>

                                                <div class="separator my-4"></div>

                                                <div class="d-flex justify-content-center">
                                                    <div class="col-lg-6">
                                                        <div class="form-floating mt-2">
                                                            <textarea class="form-control" data-kt-autosize="true" maxlength="100" placeholder="WeChat Message Body" id="wechat_body" name="wechat_body"></textarea>
                                                            <label for="wechat_body">WeChat Message Body</label>
                                                        </div>
                                                    
                                                        <div class="mt-2 d-flex justify-content-between">
                                                            <div class="">
                                                                <button type="button" id="clear_wechat_body" class="btn btn-sm btn-light">Clear</button>
                                                                <button type="button" id="last_wechat_body" class="btn btn-sm btn-light ms-1">Last Message</button>
                                                                <button type="button" id="default_wechat_body" class="btn btn-sm btn-light ms-1">Default Message</button>
                                                            </div>
                                                            <button type="button" id="copy_wechat_body" class="btn btn-sm btn-primary ms-1" data-clipboard-target="#wechat_body">Copy</button>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
                                                <button type="submit" class="btn btn-success" data-bs-dismiss="modal">WeChat Lead Author</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </form>
                                <div id="wechat_qrcode" class="mt-2"></div>
                            </div>
                            <div class="pb-5 fs-6">
                                <div class="fw-bolder mt-5">WeChat ID</div>

                                <div class="input-group mt-3">
                                    <input id="email_clipboard" type="text" class="form-control" placeholder="k*****w@g*****m" value="k*****w@g*****m" />
                                    <button class="btn btn-light-primary" data-clipboard-target="#email_clipboard">Copy</button>
                                </div>
                            </div>
                        {% comment %} {% endif %} {% endcomment %}

                        {% comment %}

                        Other channels - yet to be implemented.

                        <div class="separator mb-4"></div>

                        <div class="d-flex flex-column flex-center mb-4">
                            <a href="#" class="btn btn-primary mb-2">Telegram</a>
                        </div>

                        <div class="separator mb-4"></div>

                        <div class="d-flex flex-column flex-center mb-4">
                            <a href="#" class="btn btn-success mb-2">LINE</a>
                        </div>

                        <div class="separator mb-4"></div>

                        <div class="d-flex flex-column flex-center mb-4">
                            <a href="#" class="btn btn-info mb-2">VIBER</a>
                        </div>
                        
                        {% endcomment %}

                        <div class="separator mt-4"></div>

                        <div class="mt-4">
                            <div class="pb-5 fs-6">
                                <div class="fw-bolder mt-5">Email</div>

                                <div class="input-group mt-3">
                                    <input id="email_clipboard" type="text" class="form-control" placeholder="k*****w@g*****m" value="k*****w@g*****m" />
                                    <button class="btn btn-light-primary" data-clipboard-target="#email_clipboard">Copy</button>
                                </div>

                                <div class="separator mt-4"></div>

                                <div class="fw-bolder mt-5">Phone Number</div>

                                <div class="input-group mt-3">
                                    <input id="phone_number_clipboard" type="text" class="form-control" placeholder="+65 1*****9" value="+65 1*****9" />
                                    <button class="btn btn-light-primary" data-clipboard-target="#phone_number_clipboard">Copy</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                


                {% comment %} <div class="card mb-5 shadow-sm">

                    <div class="card-body">
                        <div class="text-center">
                            <p class="fw-bold fs-6">Add Kevin Ng as Friend</p>
                            <p class="text-gray-800">You'll be able to access Kevin Ng's contacts - e.g. email, phone number - once user accepts your friend request.</p>

                            <button class="btn btn-primary">Add Friend</button>
                        </div>
                    </div>
                </div> {% endcomment %}
            </div>
            {% comment %} End: Sidebar {% endcomment %}

            {% comment %} Start: Content {% endcomment %}
            <div class="flex-lg-row-fluid ms-lg-15">
                <ul class="nav nav-custom nav-tabs nav-line-tabs nav-line-tabs-2x border-0 fs-6 fw-bold mb-8">
                    
                    <li class="nav-item">
                        {% comment %} {% if private_notes == True %} {% endcomment %}
                            <span class="nav-link text-active-primary pb-4 active">Leads (20)</span>
                        {% comment %} {% else %}
                            <a href="{% url 'leads:contact_detail_private_notes' contact.id %}" class="nav-link text-active-primary pb-4">Private Notes</a>
                        {% endif %} {% endcomment %}
                    </li>

                    <li class="nav-item">
                        {% comment %} {% if other_contacts == True %}
                            <span class="nav-link text-active-primary pb-4 active">Other Contacts</span>
                        {% else %} {% endcomment %}
                            <a href="" class="nav-link text-active-primary pb-4">Friends (20)</a>
                        {% comment %} {% endif %} {% endcomment %}
                    </li>


                    {% comment %} <li class="nav-item"> {% endcomment %}
                        {% comment %} {% if other_contacts == True %}
                            <span class="nav-link text-active-primary pb-4 active">Other Contacts</span>
                        {% else %} {% endcomment %}
                            {% comment %} <a href="" class="nav-link text-active-primary pb-4">Followers</a> {% endcomment %}
                        {% comment %} {% endif %} {% endcomment %}
                    {% comment %} </li> {% endcomment %}



                    <li class="nav-item">
                        {% comment %} {% if other_contacts == True %}
                            <span class="nav-link text-active-primary pb-4 active">Other Contacts</span>
                        {% else %} {% endcomment %}
                            <a href="" class="nav-link text-active-primary pb-4">Contacted (20)</a>
                        {% comment %} {% endif %} {% endcomment %}
                    </li>

                    <li class="nav-item">
                        {% comment %} {% if other_contacts == True %}
                            <span class="nav-link text-active-primary pb-4 active">Other Contacts</span>
                        {% else %} {% endcomment %}
                            <a href="" class="nav-link text-active-primary pb-4">Reviews (20)</a>
                        {% comment %} {% endif %} {% endcomment %}
                    </li>





                </ul>

                <div class="tab-content">
                    {% block tab_content %}{% endblock %}
                    










<div class="card shadow-sm mt-4">
    <div class="card-header">
        <div class="card-title align-items-start flex-column">
            <div class="d-flex align-items-center">
                <div class="symbol symbol-45px me-5">
                    {% comment %} {% include 'leads/includes/avatar.html' with user=lead.author %} {% endcomment %}
                    {% comment %} {% if user.avatar == None %} {% endcomment %}
    {% comment %} Use a different color for other users {% endcomment %}
    {% comment %} {% load user_full_name_initials %} {% endcomment %}
    {% comment %} {% user_full_name_initials user as initials %} {% endcomment %}
    {% comment %} {% if request.user.is_authenticated and request.user.user.id == user.id %} {% endcomment %}
        <div class="symbol-label fs-3 bg-light-primary text-primary">{% if initials is None %}?{% else %}{{ initials }}{% endif %}</div>
    {% comment %} {% else %} {% endcomment %}
        {% comment %} <div class="symbol-label fs-3 bg-light-info text-info">{% if initials is None %}?{% else %}{{ initials }}{% endif %}</div> {% endcomment %}
    {% comment %} {% endif %} {% endcomment %}
{% comment %} {% else %} {% endcomment %}
    {% comment %} <img src="{{ user.avatar_thumbnail_url }}" /> {% endcomment %}
{% comment %} {% endif %} {% endcomment %}
                </div>
                <div class="d-flex justify-content-start flex-column">
                    {% comment %} {% include 'leads/includes/avatar_details.html' with user=lead.author %} {% endcomment %}

{% comment %} {% load user_full_name %} {% endcomment %}
{% comment %} {% user_full_name user as full_name %} {% endcomment %}
{% comment %} <div class="text-dark fw-bolder fs-6">{% if full_name is None %}{% include 'relationships/includes/name_hidden.html' %}{% else %}{{ full_name }}{% endif %}</div> {% endcomment %}
<div class="text-dark fw-bolder fs-6">Kevin Ng<span class="text-muted fw-bold fs-7 ms-2">Singapore
    {% comment %} {{ user.country.name }} {% endcomment
    {% comment %} {% if user.is_country_match_country_code %} {% endcomment %}
        {% comment %} Start: SVG icon | path: assets/media/icons/duotune/general/gen043.svg {% endcomment %}
        <span class="svg-icon svg-icon-success svg-icon-2" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Verified with phone number country code +{{ user.country.country_code }}">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="10" fill="currentColor"/>
            <path d="M10.4343 12.4343L8.75 10.75C8.33579 10.3358 7.66421 10.3358 7.25 10.75C6.83579 11.1642 6.83579 11.8358 7.25 12.25L10.2929 15.2929C10.6834 15.6834 11.3166 15.6834 11.7071 15.2929L17.25 9.75C17.6642 9.33579 17.6642 8.66421 17.25 8.25C16.8358 7.83579 16.1642 7.83579 15.75 8.25L11.5657 12.4343C11.2533 12.7467 10.7467 12.7467 10.4343 12.4343Z" fill="currentColor"/>
            </svg>
        </span>
        {% comment %} End: SVG icon {% endcomment %}
    {% comment %} {% endif %} {% endcomment %}
</span>
</div>
<div class="fw-normal fs-7">I supply medical supplies, resources, etc, etc.</div>             



                </div>
            </div>
        </div>
        <div class="card-toolbar">
            {% comment %} <span class="text-muted">{{ lead.age_desc }}</span> {% endcomment %}
            <span class="text-muted">2d ago</span>
        </div>
    </div>

    <div class="card-body">
        <div class="text-dark">
            {% comment %} Note: preview has no line breaks {% endcomment %}
            <div class="lead_body_preview" data-lead-id="{{ lead.id }}">Hello world hello world <span class="text-primary cursor-pointer show_more_lead_body">Show More</span></div>
            <div class="lead_body" style="display: none;">{{ lead.body|linebreaks }}</div>
        </div>
        <div class="d-flex justify-content-between mt-2">
            <div>
                {% include 'leads/includes/lead_badges.html' with lead=lead %}
            </div>
            <div>
                {% comment %} <span class="badge badge-light" data-bs-toggle="tooltip" data-bs-placement="bottom"{% if request.user.is_authenticated and request.user.user.id == lead.author.id %} title="{% include 'leads/includes/tooltips/leads/x_users_contacted_you.txt' with count=lead.num_contacts %}"{% else %}title="{% include 'leads/includes/tooltips/leads/x_users_contacted_author.txt' with count=lead.num_contacts %}"{% endif %}>{{ lead.num_contacts }} Contacts</span> {% endcomment %}
                {% comment %} <span class="badge badge-light" data-bs-toggle="tooltip" data-bs-placement="bottom"{% if request.user.is_authenticated and request.user.user.id == lead.author.id %} title="{% include 'leads/includes/tooltips/leads/x_users_contacted_you.txt' with count=lead.num_contacts %}"{% else %}title="{% include 'leads/includes/tooltips/leads/x_users_contacted_author.txt' with count=lead.num_contacts %}"{% endif %}>20 Contacts</span> {% endcomment %}
            </div>
        </div>
    </div>

    <div class="card-footer">
        <div class="d-flex justify-content-between">
            <div>
                <a target="_blank" href="" class="btn btn-light-info btn-sm">Contacts (20)</a>

                
                {% comment %} {% if not request.user.is_authenticated or request.user.user.id != lead.author.id %} {% endcomment %}
                    {% comment %} {% load has_flagged_spam %}
                    {% has_flagged_spam request lead as has_flagged_spam %}
                    <button type="button" id="flag_spam_button__{{lead.id}}" onclick="flag_lead({{lead.id}}, 'spam', 'flag_spam_button__{{lead.id}}', 'flag_spam_badge__{{lead.id}}')" class="btn {% if has_flagged_spam %}btn-warning{% else %}text-warning{% endif %} btn-sm" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Mark as spam to help other users.">Spam <span id="flag_spam_badge__{{lead.id}}" class="badge badge-warning ms-1">{{ lead.num_spam_flags }}</span></button>

                    {% load has_flagged_scam %}
                    {% has_flagged_scam request lead as has_flagged_scam %}
                    <button type="button" id="flag_scam_button__{{lead.id}}" onclick="flag_lead({{lead.id}}, 'scam', 'flag_scam_button__{{lead.id}}', 'flag_scam_badge__{{lead.id}}')" class="btn {% if has_flagged_scam %}btn-danger{% else %}text-danger{% endif %} btn-sm ms-1" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Mark as scam to help other users.">Scam <span id="flag_scam_badge__{{lead.id}}" class="badge badge-danger ms-1">{{ lead.num_scam_flags }}</span></button> {% endcomment %}

                    {% comment %} <a href="#" class="btn btn-light-danger btn-sm"><i class="bi bi-hand-thumbs-down"></i> Bad <span class="badge badge-danger ms-1">2</span></a> {% endcomment %}
                    {% comment %} <a href="#" class="btn btn-active-light-danger btn-sm text-danger ms-2"><i class="bi text-danger bi-hand-thumbs-down"></i> Spam or Scam <span class="badge badge-danger ms-1">2</span></a> {% endcomment %}
                    {% comment %} <a href="#" class="btn btn-outline btn-outline-dashed btn-outline-danger btn-active-light-danger btn-sm ms-1">Scam <span class="badge badge-danger ms-1">2</span></a> {% endcomment %}
                    {% comment %} <a href="#" class="btn btn-outline btn-outline-dashed btn-outline-warning btn-active-light-warning btn-sm">Spam <span class="badge badge-warning ms-1">5</span></a> {% endcomment %}
                {% comment %} {% endif %} {% endcomment %}
            </div>
            {% comment %} {% if request.user.is_authenticated and request.user.user is not None and request.user.user.id == lead.author.id %}
                <a href="{% url 'leads:lead_detail' lead.id %}" class="btn btn-light-info btn-sm">Details</a>
            {% else %} {% endcomment %}

            <div>
            </div>

            <div>
                {% comment %} <a target="_blank" href="{% url 'leads:contact_lead' lead.id %}" class="btn btn-primary btn-sm">Contact</a> {% endcomment %}
                <a target="_blank" href="" class="btn btn-primary btn-sm">Contact</a>

                
                {% comment %} <span class="bg-light text-muted btn-sm fw-bold" data-bs-toggle="tooltip" data-bs-placement="bottom" title="You've contacted this user.">Contacted</span> {% endcomment %}
            </div>
                
            {% comment %} {% endif %} {% endcomment %}
        </div>
    </div>
</div>





















                </div>
            </div>
            {% comment %} End: Content {% endcomment %}
        </div>
    </div>
</div>

{% include 'includes/paginator.html' %}
{% endblock %}

{% block page_vendor_javascript %}
<script src="{% static 'common/js/qrcode.min.js' %}"></script>
{% endblock %}

{% comment %}
// These JavaScript code includes server-side rendered values. So they cannot be included.

$(document).ready(function() {

    // Initialize clipboards
    function init_clipboard(target_id) {
        const target = document.getElementById(target_id)
        const button = target.nextElementSibling
        var clipboard = new ClipboardJS(button, {
            target: target,
            text: function() {
                return target.value
            }
        })

        clipboard.on('success', function(e) {
            const currentLabel = button.innerHTML
            if (button.innerHTML === 'Copied!'){ return }
            button.innerHTML = 'Copied!'
    
            // Revert button label after 3 seconds
            setTimeout(function(){
                button.innerHTML = currentLabel;
            }, 3000)

            if (target_id == 'email_clipboard') {
                var identify = new amplitude.Identify().add('num emails copied', 1);
                amplitude.getInstance().identify(identify)
                amplitude.getInstance().logEvent(
                    'qualification - copied email', {
                        'contact id': '{{ contact.id }}'
                    }
                )
            } else if (target_id == 'phone_number_clipboard') {
                var identify = new amplitude.Identify().add('num phone numbers copied', 1);
                amplitude.getInstance().identify(identify)
                amplitude.getInstance().logEvent(
                    'qualification - copied phone number', {
                        'contact id': '{{ contact.id }}'
                    }
                )
            }
        })
    }

    init_clipboard('email_clipboard')
    init_clipboard('phone_number_clipboard')

    // QR code. We cannot include this code because it requires server-side rendering.
    var qrcode = new QRCode(document.getElementById("wechat_qrcode"), {
        text: "{{ settings.BASE_URL }}{% url 'leads:redirect_contact_wechat' contact.id %}",
        width: 128,
        height: 128,
        colorDark : "#000000",
        colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.H
    })

    // WhatsApp message body
    function init_whatsapp_message_body_buttons() {
        clear_whatsapp_body = $('#clear_whatsapp_body')
        last_whatsapp_body = $('#last_whatsapp_body')
        default_whatsapp_body = $('#default_whatsapp_body')
        whatsapp_body = $('#whatsapp_body')

        clear_whatsapp_body.click(function() {
            whatsapp_body.val('')
            whatsapp_body.attr('rows', '2')
        })
        
        function set_last_whatsapp_body() {
            whatsapp_body.val("{{ last_whatsapp_body }}")
            whatsapp_body.attr('rows', '{{ last_whatsapp_body_rows }}')
        }

        last_whatsapp_body.click(function() {
            set_last_whatsapp_body()
        })

        set_last_whatsapp_body()

        function set_default_whatsapp_body() {
            whatsapp_body.val("{{ default_whatsapp_body }}")
            whatsapp_body.attr('rows', '{{ default_whatsapp_body_rows }}')
        }

        default_whatsapp_body.click(function() {
            set_default_whatsapp_body()
        })

        set_default_whatsapp_body()
    }

    init_whatsapp_message_body_buttons()

    // WeChat message body
    function init_wechat_message_body_buttons() {
        clear_wechat_body = $('#clear_wechat_body')
        last_wechat_body = $('#last_wechat_body')
        default_wechat_body = $('#default_wechat_body')
        wechat_body = $('#wechat_body')

        clear_wechat_body.click(function() {
            wechat_body.val('')
            wechat_body.attr('rows', '2')
        })
        
        function set_last_wechat_body() {
            wechat_body.val("{{ last_wechat_body }}")
            wechat_body.attr('rows', '{{ last_wechat_body_rows }}')
        }

        last_wechat_body.click(function() {
            set_last_wechat_body()
        })

        set_last_wechat_body()

        function set_default_wechat_body() {
            wechat_body.val("{{ default_wechat_body }}")
            wechat_body.attr('rows', '{{ default_wechat_body_rows }}')
        }

        default_wechat_body.click(function() {
            set_default_wechat_body()
        })

        set_default_wechat_body()
    }

    init_wechat_message_body_buttons()

    // Select elements
    const target = document.getElementById('wechat_body');
    const button = document.getElementById('copy_wechat_body');

    // Init clipboard -- for more info, please read the offical documentation: https://clipboardjs.com/
    var clipboard = new ClipboardJS(button, {
        target: target,
        text: function() {
            return target.innerText;
        }
    });

    // Success action handler
    clipboard.on('success', function(e) {
        const currentLabel = button.innerHTML;

        // Exit label update when already in progress
        if (button.innerHTML === 'Copied!'){
            return;
        }

        // Update button label
        button.innerHTML = 'Copied!';

        // Revert button label after 3 seconds
        setTimeout(function(){
            button.innerHTML = currentLabel;
        }, 3000)
    });
})
{% endcomment %}
{% block page_custom_javascript %}
{% comment %} <script src="{% static 'leads/js/lead_item.js' %}"></script> {% endcomment %}
{% comment %}
TODO: redo the follow Javascript
{% endcomment %}
<script>$(document).ready((function(){function t(t){const e=document.getElementById(t),a=e.nextElementSibling;new ClipboardJS(a,{target:e,text:function(){return e.value}}).on("success",(function(e){const o=a.innerHTML;if("Copied!"!==a.innerHTML)if(a.innerHTML="Copied!",setTimeout((function(){a.innerHTML=o}),3e3),"email_clipboard"==t){var n=(new amplitude.Identify).add("num emails copied",1);amplitude.getInstance().identify(n),amplitude.getInstance().logEvent("qualification - copied email",{"contact id":"{{ contact.id }}"})}else if("phone_number_clipboard"==t){n=(new amplitude.Identify).add("num phone numbers copied",1);amplitude.getInstance().identify(n),amplitude.getInstance().logEvent("qualification - copied phone number",{"contact id":"{{ contact.id }}"})}}))}t("email_clipboard"),t("phone_number_clipboard");new QRCode(document.getElementById("wechat_qrcode"),{text:"{{ settings.BASE_URL }}",width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});!function(){function t(){whatsapp_body.val("{{ last_whatsapp_body }}"),whatsapp_body.attr("rows","{{ last_whatsapp_body_rows }}")}function e(){whatsapp_body.val("{{ default_whatsapp_body }}"),whatsapp_body.attr("rows","{{ default_whatsapp_body_rows }}")}clear_whatsapp_body=$("#clear_whatsapp_body"),last_whatsapp_body=$("#last_whatsapp_body"),default_whatsapp_body=$("#default_whatsapp_body"),whatsapp_body=$("#whatsapp_body"),clear_whatsapp_body.click((function(){whatsapp_body.val(""),whatsapp_body.attr("rows","2")})),last_whatsapp_body.click((function(){t()})),t(),default_whatsapp_body.click((function(){e()})),e()}(),function(){function t(){wechat_body.val("{{ last_wechat_body }}"),wechat_body.attr("rows","{{ last_wechat_body_rows }}")}function e(){wechat_body.val("{{ default_wechat_body }}"),wechat_body.attr("rows","{{ default_wechat_body_rows }}")}clear_wechat_body=$("#clear_wechat_body"),last_wechat_body=$("#last_wechat_body"),default_wechat_body=$("#default_wechat_body"),wechat_body=$("#wechat_body"),clear_wechat_body.click((function(){wechat_body.val(""),wechat_body.attr("rows","2")})),last_wechat_body.click((function(){t()})),t(),default_wechat_body.click((function(){e()})),e()}();const e=document.getElementById("wechat_body"),a=document.getElementById("copy_wechat_body");new ClipboardJS(a,{target:e,text:function(){return e.innerText}}).on("success",(function(t){const e=a.innerHTML;"Copied!"!==a.innerHTML&&(a.innerHTML="Copied!",setTimeout((function(){a.innerHTML=e}),3e3))}))}));</script>



<script>$(document).ready((function(){function t(t){const e=document.getElementById(t),a=e.nextElementSibling;new ClipboardJS(a,{target:e,text:function(){return e.value}}).on("success",(function(e){const o=a.innerHTML;if("Copied!"!==a.innerHTML)if(a.innerHTML="Copied!",setTimeout((function(){a.innerHTML=o}),3e3),"email_clipboard"==t){var n=(new amplitude.Identify).add("num emails copied",1);amplitude.getInstance().identify(n),amplitude.getInstance().logEvent("qualification - copied email",{"contact id":"{{ contact.id }}"})}else if("phone_number_clipboard"==t){n=(new amplitude.Identify).add("num phone numbers copied",1);amplitude.getInstance().identify(n),amplitude.getInstance().logEvent("qualification - copied phone number",{"contact id":"{{ contact.id }}"})}}))}t("email_clipboard"),t("phone_number_clipboard");new QRCode(document.getElementById("whatsapp_qrcode"),{text:"{{ settings.BASE_URL }}",width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});!function(){function t(){whatsapp_body.val("{{ last_whatsapp_body }}"),whatsapp_body.attr("rows","{{ last_whatsapp_body_rows }}")}function e(){whatsapp_body.val("{{ default_whatsapp_body }}"),whatsapp_body.attr("rows","{{ default_whatsapp_body_rows }}")}clear_whatsapp_body=$("#clear_whatsapp_body"),last_whatsapp_body=$("#last_whatsapp_body"),default_whatsapp_body=$("#default_whatsapp_body"),whatsapp_body=$("#whatsapp_body"),clear_whatsapp_body.click((function(){whatsapp_body.val(""),whatsapp_body.attr("rows","2")})),last_whatsapp_body.click((function(){t()})),t(),default_whatsapp_body.click((function(){e()})),e()}(),function(){function t(){wechat_body.val("{{ last_wechat_body }}"),wechat_body.attr("rows","{{ last_wechat_body_rows }}")}function e(){wechat_body.val("{{ default_wechat_body }}"),wechat_body.attr("rows","{{ default_wechat_body_rows }}")}clear_wechat_body=$("#clear_wechat_body"),last_wechat_body=$("#last_wechat_body"),default_wechat_body=$("#default_wechat_body"),wechat_body=$("#wechat_body"),clear_wechat_body.click((function(){wechat_body.val(""),wechat_body.attr("rows","2")})),last_wechat_body.click((function(){t()})),t(),default_wechat_body.click((function(){e()})),e()}();const e=document.getElementById("wechat_body"),a=document.getElementById("copy_wechat_body");new ClipboardJS(a,{target:e,text:function(){return e.innerText}}).on("success",(function(t){const e=a.innerHTML;"Copied!"!==a.innerHTML&&(a.innerHTML="Copied!",setTimeout((function(){a.innerHTML=e}),3e3))}))}));</script>
{% endblock %}