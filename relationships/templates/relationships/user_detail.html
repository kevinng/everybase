{% extends 'extendables/b.html' %}

{% load static %}

{% block title %}{% if user != None %}{{ user.first_name }} {{ user.last_name }} {% endif %}+{{ phone_number.country_code }} {{ phone_number.national_number }}{% endblock %}
{% block meta_description %}Importer/exporter reviews for {% if user != None %}{{ user.first_name }} {{ user.last_name }} {% endif %}+{{ phone_number.country_code }} {{ phone_number.national_number }}{% endblock %}
{% block meta_og_description %}Importer/exporter reviews for {% if user != None %}{{ user.first_name }} {{ user.last_name }} {% endif %}+{{ phone_number.country_code }} {{ phone_number.national_number }}{% endblock %}
{% block meta_og_title %}{% if user != None %}{{ user.first_name }} {{ user.last_name }} {% endif %}+{{ phone_number.country_code }} {{ phone_number.national_number }}{% endblock %}
{% block meta_og_url %}{{ absolute_url }}{% endblock %}
{% block meta_og_image %}{% if user.status_images.all|length > 0 %}{% with user.status_images.all|first as image %}{% load thumbnail_url %}{% thumbnail_url image.file as thumbnail_url %}{{ thumbnail_url }}{% endwith %}{% else %}{% static 'common/demo1/dist/assets/media/home/og_image/home_og_image.png' %}{% endif %}{% endblock %}
{% block meta_og_image_url %}{% if user.status_images.all|length > 0 %}{% with user.status_images.all|first as image %}{% load thumbnail_url %}{% thumbnail_url image.file as thumbnail_url %}{{ thumbnail_url }}{% endwith %}{% else %}{% static 'common/demo1/dist/assets/media/home/og_image/home_og_image.png' %}{% endif %}{% endblock %}
{% block meta_og_image_secure_url %}{% if user.status_images.all|length > 0 %}{% with user.status_images.all|first as image %}{% load thumbnail_url %}{% thumbnail_url image.file as thumbnail_url %}{{ thumbnail_url }}{% endwith %}{% else %}{% static 'common/demo1/dist/assets/media/home/og_image/home_og_image.png' %}{% endif %}{% endblock %}
{% block meta_og_image_type %}{% if user.status_images.all|length > 0 %}{% with user.status_images.all|first as image %}{{ image.file.mime_type }}{% endwith %}{% else %}image/png{% endif %}{% endblock %}
{% block meta_og_image_width %}{% if user.status_images.all|length > 0 %}{% with user.status_images.all|first as image %}{{ image.file.thumbnail_width }}{% endwith %}{% else %}300{% endif %}{% endblock %}
{% block meta_og_image_height %}{% if user.status_images.all|length > 0 %}{% with user.status_images.all|first as image %}{{ image.file.thumbnail_height }}{% endwith %}{% else %}200{% endif %}{% endblock %}
{% block meta_og_type %}article{% endblock %}

{% block page_vendor_stylesheets %}
    {% if user.walked_through_status == None %}
        {% comment %} Only load walkthrough dependencies when necessary. {% endcomment %}
        <link href="{% static 'common/css/introjs.min.css' %}" rel="stylesheet">
    {% endif %}
{% endblock %}

{% block page_title %}{% if user == None %}+ {{ phone_number.country_code }} {{ phone_number.national_number }}{% else %}{{ user.first_name }} {{ user.last_name }}{% endif %}{% endblock %}
{% block page_title_separator %}{% endblock %}

{% block actions %}
<button id="lc_clipboard" class="btn btn-sm btn-secondary" data-clipboard-text="{{ request.build_absolute_uri }}">
    {% comment %} SVG Icon | path: /var/www/preview.keenthemes.com/kt-products/docs/metronic/html/releases/2022-09-15-053640/core/html/src/media/icons/duotune/coding/cod007.svg--> {% endcomment %}
    <span class="svg-icon svg-icon-muted">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path opacity="0.3" d="M18.4 5.59998C18.7766 5.9772 18.9881 6.48846 18.9881 7.02148C18.9881 7.55451 18.7766 8.06577 18.4 8.44299L14.843 12C14.466 12.377 13.9547 12.5887 13.4215 12.5887C12.8883 12.5887 12.377 12.377 12 12C11.623 11.623 11.4112 11.1117 11.4112 10.5785C11.4112 10.0453 11.623 9.53399 12 9.15698L15.553 5.604C15.9302 5.22741 16.4415 5.01587 16.9745 5.01587C17.5075 5.01587 18.0188 5.22741 18.396 5.604L18.4 5.59998ZM20.528 3.47205C20.0614 3.00535 19.5074 2.63503 18.8977 2.38245C18.288 2.12987 17.6344 1.99988 16.9745 1.99988C16.3145 1.99988 15.661 2.12987 15.0513 2.38245C14.4416 2.63503 13.8876 3.00535 13.421 3.47205L9.86801 7.02502C9.40136 7.49168 9.03118 8.04568 8.77863 8.6554C8.52608 9.26511 8.39609 9.91855 8.39609 10.5785C8.39609 11.2384 8.52608 11.8919 8.77863 12.5016C9.03118 13.1113 9.40136 13.6653 9.86801 14.132C10.3347 14.5986 10.8886 14.9688 11.4984 15.2213C12.1081 15.4739 12.7616 15.6039 13.4215 15.6039C14.0815 15.6039 14.7349 15.4739 15.3446 15.2213C15.9543 14.9688 16.5084 14.5986 16.975 14.132L20.528 10.579C20.9947 10.1124 21.3649 9.55844 21.6175 8.94873C21.8701 8.33902 22.0001 7.68547 22.0001 7.02551C22.0001 6.36555 21.8701 5.71201 21.6175 5.10229C21.3649 4.49258 20.9947 3.93867 20.528 3.47205Z" fill="currentColor"/>
            <path d="M14.132 9.86804C13.6421 9.37931 13.0561 8.99749 12.411 8.74695L12 9.15698C11.6234 9.53421 11.4119 10.0455 11.4119 10.5785C11.4119 11.1115 11.6234 11.6228 12 12C12.3766 12.3772 12.5881 12.8885 12.5881 13.4215C12.5881 13.9545 12.3766 14.4658 12 14.843L8.44699 18.396C8.06999 18.773 7.55868 18.9849 7.02551 18.9849C6.49235 18.9849 5.98101 18.773 5.604 18.396C5.227 18.019 5.0152 17.5077 5.0152 16.9745C5.0152 16.4413 5.227 15.93 5.604 15.553L8.74701 12.411C8.28705 11.233 8.28705 9.92498 8.74701 8.74695C8.10159 8.99737 7.5152 9.37919 7.02499 9.86804L3.47198 13.421C2.52954 14.3635 2.00009 15.6417 2.00009 16.9745C2.00009 18.3073 2.52957 19.5855 3.47202 20.528C4.41446 21.4704 5.69269 21.9999 7.02551 21.9999C8.35833 21.9999 9.63656 21.4704 10.579 20.528L14.132 16.975C14.5987 16.5084 14.9689 15.9544 15.2215 15.3447C15.4741 14.735 15.6041 14.0815 15.6041 13.4215C15.6041 12.7615 15.4741 12.108 15.2215 11.4983C14.9689 10.8886 14.5987 10.3347 14.132 9.86804Z" fill="currentColor"/>
        </svg>
    </span>
    {% comment %} SVG Icon {% endcomment %}
    Copy Link
</button>
<span class="h-20px border-1 border-gray-200 border-start mx-1"></span>
<a href="#" class="btn btn-sm btn-primary">Review</a>
<a href="{% url 'user_whatsapp' phone_number.value %}" class="btn btn-sm btn-success">WhatsApp</a>
{% endblock %}

{% block content_body %}
<div class="post d-flex flex-column-fluid" id="kt_post">
    <div id="kt_content_container" class="container-xxl">
        {% comment %} Start: Page Tabs {% endcomment %}
        {% if request.user.is_authenticated and request.user.user.id == user.id %}
        <div class="card" x-data="{
            status: {% if form.status.value != None %}'{{ form.status.value }}'{% else %}''{% endif %},
            isShowingUpdateForm: {% if is_show_update_form != None %}{% if is_show_update_form == True %}true{% else %}false{% endif %}{% endif %},
            updateStatus() {
                this.isShowingUpdateForm = true
            },
            disableSave() {
                let num_files_uploading = $refs.num_files_processing.value - $refs.num_files_success.value - $refs.num_files_error.value - $refs.num_files_removed.value
                return this.status.length <= 0 || num_files_uploading > 0
            },
            cancel() {
                this.status = ''
                this.isShowingUpdateForm = false
                Dropzone.forElement('#status_dropzone').removeAllFiles(true)
                fetch('{% url 'users:delete_orphan_files' user.id %}', { method: 'POST' })
            }
        }">
        {% else %}
        <div class="card">
        {% endif %}
            <div class="card-header">
                <div class="card-title d-flex flex-column py-4">
                    <div>{% if user == None %}+ {{ phone_number.country_code }} {{ phone_number.national_number }}{% else %}{{ user.first_name }} {{ user.last_name }}{% endif %}</div>
                    {% if user != None %}<div class="fs-7 text-muted">{{ user.country.name }}</div>{% endif %}
                </div>
                <div class="card-toolbar">
                    <div class="text-muted">{{ user.status_updated_age_desc }}</div>
                </div>
            </div>

            {% if request.user.is_authenticated and request.user.user.id == user.id %}
            <form action="{% url 'user_detail' user.phone_number.value %}" method="post">
                {% csrf_token %}
                <input type="hidden" name="form_uuid" value="{{ form_uuid }}" />
                <input type="hidden" id="num_files_processing" value="0" x-ref="num_files_processing" />
                <input type="hidden" id="num_files_success" value="0" x-ref="num_files_success" />
                <input type="hidden" id="num_files_error" value="0" x-ref="num_files_error" />
                <input type="hidden" id="num_files_removed" value="0" x-ref="num_files_removed" />
            {% endif %}

                <div class="card-body">
                    {% if request.user.is_authenticated and request.user.user.id == user.id %}
                    <div x-show="!isShowingUpdateForm">
                    {% else %}
                    <div>
                    {% endif %}    
                        <div>{% if user.status != None %}{{ user.status|linebreaksbr }}{% else %}<span class="badge badge-secondary">No Status</span>{% endif %}</div>
                        <div class="mt-4">
                            <div class="d-flex gap-2">
                                {% if user.status_images.all|length > 0 %}
                                    {% load thumbnail_url %}
                                    {% load image_url %}
                                    {% for image in user.status_images.all %}
                                        {% thumbnail_url image.file as thumbnail_url %}
                                        {% image_url image.file as image_url %}
                                        <a class="d-block overlay" data-fslightbox="lightbox-basic" href="{{ image_url }}">
                                            <div class="overlay-wrapper bgi-no-repeat bgi-position-center bgi-size-cover card-rounded w-50px h-50px"
                                                style="background-image:url('{{ thumbnail_url }}')">
                                            </div>
                                            <div class="overlay-layer card-rounded bg-dark bg-opacity-25 shadow">
                                                <i class="bi bi-eye-fill text-white fs-3x"></i>
                                            </div>
                                        </a>
                                    {% endfor %}
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    {% if request.user.is_authenticated and request.user.user.id == user.id %}
                    <div x-show="isShowingUpdateForm">
                        <label class="form-label" for="status">Status</label>
                        <textarea x-model="status" class="w-100 form-control" data-kt-autosize="true" maxlength="500" rows="3" maxlength="100" id="status" name="status" placeholder="E.g., I sell paper and I'm looking for buyers..."></textarea>
                        <div class="form-text">Your status let others know what you're interested in. E.g., buying, selling.</div>
                        {% if form.status.errors %}<div class="text-danger mt-2 ms-2">{% for error in form.status.errors %}{{ error|escape }}{% if not forloop.last %} {% endif %}{% endfor %}</div>{% endif %}
                    </div>

                    <div class="mt-4" x-show="isShowingUpdateForm">
                        <div class="dropzone" id="status_dropzone">
                            <div class="dz-message needsclick">
                                <i class="bi bi-file-earmark-arrow-up text-primary fs-3x"></i>
                                <div class="ms-4">
                                    <h3 class="fs-5 fw-bold text-gray-900 mb-1">Drop images here or click to upload.</h3>
                                    <span class="fs-7 fw-semibold text-gray-400">Upload up to {{ settings.MAX_STATUS_IMAGES }} images.</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>

                {% if request.user.is_authenticated and request.user.user.id == user.id %}
                <div class="card-footer d-flex justify-content-between flex-wrap gap-2">
                    <div class="d-flex justify-content-start gap-2 flex-wrap" x-show="!isShowingUpdateForm">
                        <button class="btn btn-sm btn-secondary" x-show="!isShowingUpdateForm">
                            {% comment %} Start: SVG Icon | path: /var/www/preview.keenthemes.com/kt-products/docs/metronic/html/releases/2022-09-15-053640/core/html/src/media/icons/duotune/general/gen054.svg {% endcomment %}
                            <span class="svg-icon svg-icon-muted">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path opacity="0.5" d="M18 2H9C7.34315 2 6 3.34315 6 5H8C8 4.44772 8.44772 4 9 4H18C18.5523 4 19 4.44772 19 5V16C19 16.5523 18.5523 17 18 17V19C19.6569 19 21 17.6569 21 16V5C21 3.34315 19.6569 2 18 2Z" fill="currentColor"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.7857 7.125H6.21429C5.62255 7.125 5.14286 7.6007 5.14286 8.1875V18.8125C5.14286 19.3993 5.62255 19.875 6.21429 19.875H14.7857C15.3774 19.875 15.8571 19.3993 15.8571 18.8125V8.1875C15.8571 7.6007 15.3774 7.125 14.7857 7.125ZM6.21429 5C4.43908 5 3 6.42709 3 8.1875V18.8125C3 20.5729 4.43909 22 6.21429 22H14.7857C16.5609 22 18 20.5729 18 18.8125V8.1875C18 6.42709 16.5609 5 14.7857 5H6.21429Z" fill="currentColor"/>
                                </svg>
                            </span>
                            {% comment %} End: SVG Icon {% endcomment %}
                            Copy
                        </button>
                        <button class="btn btn-sm btn-success" x-show="!isShowingUpdateForm">Share WhatsApp</button>
                        <a x-show="!isShowingUpdateForm" target="_blank" href="https://www.facebook.com/sharer/sharer.php?src=sp&u={{ absolute_url }}" class="btn btn-sm btn-facebook">Share Facebook</a>
                    </div>

                    <div class="d-flex justify-content-end gap-2 flex-wrap">
                        <button type="button" class="btn btn-sm btn-secondary" x-show="isShowingUpdateForm" @click="cancel" id="cancel">Cancel</button>
                        <button type="submit" class="btn btn-sm btn-primary" x-show="isShowingUpdateForm" id="save" x-bind:disabled="disableSave">Save</button>
                        <button type="button" class="btn btn-sm btn-primary" x-show="!isShowingUpdateForm" @click="updateStatus"> 
                            {% comment %} Start: SVG Icon | path: /var/www/preview.keenthemes.com/kt-products/docs/metronic/html/releases/2022-09-15-053640/core/html/src/media/icons/duotune/general/gen055.svg {% endcomment %}
                            <span class="svg-icon svg-icon-muted">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M2 4.63158C2 3.1782 3.1782 2 4.63158 2H13.47C14.0155 2 14.278 2.66919 13.8778 3.04006L12.4556 4.35821C11.9009 4.87228 11.1726 5.15789 10.4163 5.15789H7.1579C6.05333 5.15789 5.15789 6.05333 5.15789 7.1579V16.8421C5.15789 17.9467 6.05333 18.8421 7.1579 18.8421H16.8421C17.9467 18.8421 18.8421 17.9467 18.8421 16.8421V13.7518C18.8421 12.927 19.1817 12.1387 19.7809 11.572L20.9878 10.4308C21.3703 10.0691 22 10.3403 22 10.8668V19.3684C22 20.8218 20.8218 22 19.3684 22H4.63158C3.1782 22 2 20.8218 2 19.3684V4.63158Z" fill="currentColor"/>
                                    <path d="M10.9256 11.1882C10.5351 10.7977 10.5351 10.1645 10.9256 9.77397L18.0669 2.6327C18.8479 1.85165 20.1143 1.85165 20.8953 2.6327L21.3665 3.10391C22.1476 3.88496 22.1476 5.15129 21.3665 5.93234L14.2252 13.0736C13.8347 13.4641 13.2016 13.4641 12.811 13.0736L10.9256 11.1882Z" fill="currentColor"/>
                                    <path d="M8.82343 12.0064L8.08852 14.3348C7.8655 15.0414 8.46151 15.7366 9.19388 15.6242L11.8974 15.2092C12.4642 15.1222 12.6916 14.4278 12.2861 14.0223L9.98595 11.7221C9.61452 11.3507 8.98154 11.5055 8.82343 12.0064Z" fill="currentColor"/>
                                </svg>
                            </span>
                            {% comment %} End: SVG Icon {% endcomment %}
                            Update Status
                        </button>
                    </div>
                </div>
                {% else %}
                <div class="card-footer d-flex flex-column flex-wrap gap-2">
                    <div class="fw-normal fs-normal">
                        Ask your friends about this user
                    </div>
                    <div class="d-flex justify-content-start gap-2 flex-wrap">
                        <button class="btn btn-sm btn-secondary" id="ask_text_clipboard" data-clipboard-text="{{ ask_text }}">
                            {% comment %} Start: SVG Icon | path: /var/www/preview.keenthemes.com/kt-products/docs/metronic/html/releases/2022-09-15-053640/core/html/src/media/icons/duotune/general/gen054.svg {% endcomment %}
                            <span class="svg-icon svg-icon-muted">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path opacity="0.5" d="M18 2H9C7.34315 2 6 3.34315 6 5H8C8 4.44772 8.44772 4 9 4H18C18.5523 4 19 4.44772 19 5V16C19 16.5523 18.5523 17 18 17V19C19.6569 19 21 17.6569 21 16V5C21 3.34315 19.6569 2 18 2Z" fill="currentColor"/>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.7857 7.125H6.21429C5.62255 7.125 5.14286 7.6007 5.14286 8.1875V18.8125C5.14286 19.3993 5.62255 19.875 6.21429 19.875H14.7857C15.3774 19.875 15.8571 19.3993 15.8571 18.8125V8.1875C15.8571 7.6007 15.3774 7.125 14.7857 7.125ZM6.21429 5C4.43908 5 3 6.42709 3 8.1875V18.8125C3 20.5729 4.43909 22 6.21429 22H14.7857C16.5609 22 18 20.5729 18 18.8125V8.1875C18 6.42709 16.5609 5 14.7857 5H6.21429Z" fill="currentColor"/>
                                </svg>
                            </span>
                            {% comment %} End: SVG Icon {% endcomment %}
                            Copy
                        </button>
                        <a target="_blank" href="https://api.whatsapp.com/send?text={{ ask_text_url }}" class="btn btn-sm btn-success">Ask WhatsApp</a>
                        <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?src=sp&u={{ absolute_url }}" class="btn btn-sm btn-facebook">Ask Facebook</a>
                    </div>
                </div>
                {% endif %}

            {% if request.user.is_authenticated and request.user.user.id == user.id %}
            </form>
            {% endif %}
        </div>
        {% comment %} End: Page Tabs {% endcomment %}

        {% include 'relationships/includes/user_detail__nav.html' with active='detail' user=user %}

        {% if user != None %}
        {% comment %} Start: Profile {% endcomment %}
        <div class="card mt-4">
            <div class="card-header">
                <div class="card-title">
                    <h3 class="fw-bolder">Profile</h3>
                </div>
            </div>

            <div class="card-body">
                <div class="row">
                    <label class="col-lg-4 fw-bold text-muted">Name</label>
                    <div class="col-lg-8">
                        <span class="fw-bolder text-gray-800 fs-6">Kevin Ng</span>
                    </div>
                </div>

                <div class="row mt-6">
                    <label class="col-lg-4 fw-bold text-muted d-flex align-items-center gap-1">Country
                        {% if user.is_country_match_country_code %}
                            {% comment %} Start: SVG icon | path: assets/media/icons/duotune/general/gen043.svg {% endcomment %}
                            <span class="svg-icon svg-icon-success svg-icon-2" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Match phone number country code +{{ user.country.country_code }}.">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect opacity="0.3" x="2" y="2" width="20" height="20" rx="10" fill="currentColor"/>
                                <path d="M10.4343 12.4343L8.75 10.75C8.33579 10.3358 7.66421 10.3358 7.25 10.75C6.83579 11.1642 6.83579 11.8358 7.25 12.25L10.2929 15.2929C10.6834 15.6834 11.3166 15.6834 11.7071 15.2929L17.25 9.75C17.6642 9.33579 17.6642 8.66421 17.25 8.25C16.8358 7.83579 16.1642 7.83579 15.75 8.25L11.5657 12.4343C11.2533 12.7467 10.7467 12.7467 10.4343 12.4343Z" fill="currentColor"/>
                                </svg>
                            </span>
                            {% comment %} End: SVG icon {% endcomment %}
                        {% endif %}
                    </label>
                    <div class="col-lg-8">
                        <span class="fw-bolder text-gray-800 fs-6">{{ user.country.name }}</span>
                    </div>
                </div>

                {% if user.business_name != None and user.business_name|length > 0 %}
                    <div class="row mt-6">
                        <label class="col-lg-4 fw-bold text-muted">Business Name</label>
                        <div class="col-lg-8">
                            <span class="fw-bolder text-gray-800 fs-6">Leng Guan Metal Pte Ltd</span>
                        </div>
                    </div>
                {% endif %}
                
                {% if user.business_address != None and user.business_address|length > 0 %}
                    <div class="row mt-6">
                        <label class="col-lg-4 fw-bold text-muted">Business Address</label>
                        <div class="col-lg-8">
                            <span class="fw-bolder text-gray-800 fs-6">{{ user.business_address|linebreaksbr }}</span>
                            <div class="d-flex justify-content-end mt-2 gap-2 flex-wrap">
                                <button class="btn btn-secondary btn-sm" id="business_address_clipboard" data-clipboard-text="{{ user.business_address }}">
                                    {% comment %} Start: SVG Icon | path: /var/www/preview.keenthemes.com/kt-products/docs/metronic/html/releases/2022-09-15-053640/core/html/src/media/icons/duotune/general/gen054.svg {% endcomment %}
                                    <span class="svg-icon svg-icon-muted">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path opacity="0.5" d="M18 2H9C7.34315 2 6 3.34315 6 5H8C8 4.44772 8.44772 4 9 4H18C18.5523 4 19 4.44772 19 5V16C19 16.5523 18.5523 17 18 17V19C19.6569 19 21 17.6569 21 16V5C21 3.34315 19.6569 2 18 2Z" fill="currentColor"/>
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.7857 7.125H6.21429C5.62255 7.125 5.14286 7.6007 5.14286 8.1875V18.8125C5.14286 19.3993 5.62255 19.875 6.21429 19.875H14.7857C15.3774 19.875 15.8571 19.3993 15.8571 18.8125V8.1875C15.8571 7.6007 15.3774 7.125 14.7857 7.125ZM6.21429 5C4.43908 5 3 6.42709 3 8.1875V18.8125C3 20.5729 4.43909 22 6.21429 22H14.7857C16.5609 22 18 20.5729 18 18.8125V8.1875C18 6.42709 16.5609 5 14.7857 5H6.21429Z" fill="currentColor"/>
                                        </svg>
                                    </span>
                                    {% comment %} End: SVG Icon {% endcomment %}
                                    Copy Address
                                </button>
                                <a target="_blank" class="btn btn-secondary btn-sm" href="https://maps.google.com/?q={{ user.business_address|urlencode }}">
                                    {% comment %} Start: SVG Icon | path: /var/www/preview.keenthemes.com/kt-products/docs/metronic/html/releases/2022-09-15-053640/core/html/src/media/icons/duotune/maps/map008.svg {% endcomment %}
                                        <span class="svg-icon svg-icon-muted">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path opacity="0.3" d="M18.0624 15.3454L13.1624 20.7453C12.5624 21.4453 11.5624 21.4453 10.9624 20.7453L6.06242 15.3454C4.56242 13.6454 3.76242 11.4452 4.06242 8.94525C4.56242 5.34525 7.46242 2.44534 11.0624 2.04534C15.8624 1.54534 19.9624 5.24525 19.9624 9.94525C20.0624 12.0452 19.2624 13.9454 18.0624 15.3454ZM13.0624 10.0453C13.0624 9.44534 12.6624 9.04534 12.0624 9.04534C11.4624 9.04534 11.0624 9.44534 11.0624 10.0453V13.0453H13.0624V10.0453Z" fill="currentColor"/>
                                                <path d="M12.6624 5.54531C12.2624 5.24531 11.7624 5.24531 11.4624 5.54531L8.06241 8.04531V12.0453C8.06241 12.6453 8.46241 13.0453 9.06241 13.0453H11.0624V10.0453C11.0624 9.44531 11.4624 9.04531 12.0624 9.04531C12.6624 9.04531 13.0624 9.44531 13.0624 10.0453V13.0453H15.0624C15.6624 13.0453 16.0624 12.6453 16.0624 12.0453V8.04531L12.6624 5.54531Z" fill="currentColor"/>
                                            </svg>
                                        </span>
                                    {% comment %} End: SVG Icon {% endcomment %}
                                    Google Maps
                                </a>
                            </div>
                        </div>
                    </div>
                {% endif %}

                {% if user.business_description != None and user.business_description|length > 0 %}
                    <div class="row mt-6">
                        <label class="col-lg-4 fw-bold text-muted">Business Description</label>
                        <div class="col-lg-8">
                            <span class="fw-bolder fs-6 text-gray-800">{{ user.business_description|linebreaksbr }}</span>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        {% comment %} End: Profile {% endcomment %}
        {% else %}
        <div class="alert bg-light-dark d-flex flex-column flex-sm-row w-100 p-5 mt-10">
            <span class="svg-icon svg-icon-2hx svg-icon-dark me-4 mb-5 mb-sm-0">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path opacity="0.3" d="M12 22C13.6569 22 15 20.6569 15 19C15 17.3431 13.6569 16 12 16C10.3431 16 9 17.3431 9 19C9 20.6569 10.3431 22 12 22Z" fill="currentColor"></path>
                    <path d="M19 15V18C19 18.6 18.6 19 18 19H6C5.4 19 5 18.6 5 18V15C6.1 15 7 14.1 7 13V10C7 7.6 8.7 5.6 11 5.1V3C11 2.4 11.4 2 12 2C12.6 2 13 2.4 13 3V5.1C15.3 5.6 17 7.6 17 10V13C17 14.1 17.9 15 19 15ZM11 10C11 9.4 11.4 9 12 9C12.6 9 13 8.6 13 8C13 7.4 12.6 7 12 7C10.3 7 9 8.3 9 10C9 10.6 9.4 11 10 11C10.6 11 11 10.6 11 10Z" fill="currentColor"></path>
                </svg>
            </span>

            <div class="d-flex flex-column pe-0 pe-sm-10">
                <h4 class="fw-semibold">This Number Has Not Been Claimed</h4>
                <span>Ask user to claim and verify this phone number.</span>
                <div class="mt-4">
                    <a href="" class="btn btn-success btn-sm">WhatsApp User</a>
                </div>
                <span class="mt-4">You may review this user.</span>
                <div class="mt-4">
                    <a href="" class="btn btn-primary btn-sm">Review User</a>
                </div>
            </div>

            <button type="button" class="position-absolute position-sm-relative m-2 m-sm-0 top-0 end-0 btn btn-icon ms-sm-auto" data-bs-dismiss="alert">
                {% comment %} SVG Icon | path: icons/duotune/arrows/arr061.svg {% endcomment %}
                <span class="svg-icon svg-icon-1 svg-icon-dark">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"></rect>
                        <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"></rect>
                    </svg>
                </span>
                {% comment %} End: SVG Icon {% endcomment %}
            </button>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block page_vendor_javascript %}
<script src="{% static 'common/js/qrcode.min.js' %}"></script>
<script src="{% static 'common/js/introjs.min.js' %}"></script>
<script src="{% static 'common/demo1/dist/assets/plugins/custom/fslightbox/fslightbox.bundle.js' %}"></script>
{% endblock %}

{% block page_custom_javascript %}
<script>
$(document).ready(function() {
    lc_target = document.getElementById('lc_clipboard');
    lc_clipboard = new ClipboardJS(lc_target);
    lc_clipboard.on('success', function(e) {
        const currentLabel = lc_target.innerHTML;
        // Exit label update when already in progress
        if (lc_target.innerHTML === '<span class="svg-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.3" d="M18.4 5.59998C18.7766 5.9772 18.9881 6.48846 18.9881 7.02148C18.9881 7.55451 18.7766 8.06577 18.4 8.44299L14.843 12C14.466 12.377 13.9547 12.5887 13.4215 12.5887C12.8883 12.5887 12.377 12.377 12 12C11.623 11.623 11.4112 11.1117 11.4112 10.5785C11.4112 10.0453 11.623 9.53399 12 9.15698L15.553 5.604C15.9302 5.22741 16.4415 5.01587 16.9745 5.01587C17.5075 5.01587 18.0188 5.22741 18.396 5.604L18.4 5.59998ZM20.528 3.47205C20.0614 3.00535 19.5074 2.63503 18.8977 2.38245C18.288 2.12987 17.6344 1.99988 16.9745 1.99988C16.3145 1.99988 15.661 2.12987 15.0513 2.38245C14.4416 2.63503 13.8876 3.00535 13.421 3.47205L9.86801 7.02502C9.40136 7.49168 9.03118 8.04568 8.77863 8.6554C8.52608 9.26511 8.39609 9.91855 8.39609 10.5785C8.39609 11.2384 8.52608 11.8919 8.77863 12.5016C9.03118 13.1113 9.40136 13.6653 9.86801 14.132C10.3347 14.5986 10.8886 14.9688 11.4984 15.2213C12.1081 15.4739 12.7616 15.6039 13.4215 15.6039C14.0815 15.6039 14.7349 15.4739 15.3446 15.2213C15.9543 14.9688 16.5084 14.5986 16.975 14.132L20.528 10.579C20.9947 10.1124 21.3649 9.55844 21.6175 8.94873C21.8701 8.33902 22.0001 7.68547 22.0001 7.02551C22.0001 6.36555 21.8701 5.71201 21.6175 5.10229C21.3649 4.49258 20.9947 3.93867 20.528 3.47205Z" fill="currentColor"/><path d="M14.132 9.86804C13.6421 9.37931 13.0561 8.99749 12.411 8.74695L12 9.15698C11.6234 9.53421 11.4119 10.0455 11.4119 10.5785C11.4119 11.1115 11.6234 11.6228 12 12C12.3766 12.3772 12.5881 12.8885 12.5881 13.4215C12.5881 13.9545 12.3766 14.4658 12 14.843L8.44699 18.396C8.06999 18.773 7.55868 18.9849 7.02551 18.9849C6.49235 18.9849 5.98101 18.773 5.604 18.396C5.227 18.019 5.0152 17.5077 5.0152 16.9745C5.0152 16.4413 5.227 15.93 5.604 15.553L8.74701 12.411C8.28705 11.233 8.28705 9.92498 8.74701 8.74695C8.10159 8.99737 7.5152 9.37919 7.02499 9.86804L3.47198 13.421C2.52954 14.3635 2.00009 15.6417 2.00009 16.9745C2.00009 18.3073 2.52957 19.5855 3.47202 20.528C4.41446 21.4704 5.69269 21.9999 7.02551 21.9999C8.35833 21.9999 9.63656 21.4704 10.579 20.528L14.132 16.975C14.5987 16.5084 14.9689 15.9544 15.2215 15.3447C15.4741 14.735 15.6041 14.0815 15.6041 13.4215C15.6041 12.7615 15.4741 12.108 15.2215 11.4983C14.9689 10.8886 14.5987 10.3347 14.132 9.86804Z" fill="currentColor"/></svg></span> Copied!') {
            return
        }

        // Update button label
        lc_target.innerHTML = '<span class="svg-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.3" d="M18.4 5.59998C18.7766 5.9772 18.9881 6.48846 18.9881 7.02148C18.9881 7.55451 18.7766 8.06577 18.4 8.44299L14.843 12C14.466 12.377 13.9547 12.5887 13.4215 12.5887C12.8883 12.5887 12.377 12.377 12 12C11.623 11.623 11.4112 11.1117 11.4112 10.5785C11.4112 10.0453 11.623 9.53399 12 9.15698L15.553 5.604C15.9302 5.22741 16.4415 5.01587 16.9745 5.01587C17.5075 5.01587 18.0188 5.22741 18.396 5.604L18.4 5.59998ZM20.528 3.47205C20.0614 3.00535 19.5074 2.63503 18.8977 2.38245C18.288 2.12987 17.6344 1.99988 16.9745 1.99988C16.3145 1.99988 15.661 2.12987 15.0513 2.38245C14.4416 2.63503 13.8876 3.00535 13.421 3.47205L9.86801 7.02502C9.40136 7.49168 9.03118 8.04568 8.77863 8.6554C8.52608 9.26511 8.39609 9.91855 8.39609 10.5785C8.39609 11.2384 8.52608 11.8919 8.77863 12.5016C9.03118 13.1113 9.40136 13.6653 9.86801 14.132C10.3347 14.5986 10.8886 14.9688 11.4984 15.2213C12.1081 15.4739 12.7616 15.6039 13.4215 15.6039C14.0815 15.6039 14.7349 15.4739 15.3446 15.2213C15.9543 14.9688 16.5084 14.5986 16.975 14.132L20.528 10.579C20.9947 10.1124 21.3649 9.55844 21.6175 8.94873C21.8701 8.33902 22.0001 7.68547 22.0001 7.02551C22.0001 6.36555 21.8701 5.71201 21.6175 5.10229C21.3649 4.49258 20.9947 3.93867 20.528 3.47205Z" fill="currentColor"/><path d="M14.132 9.86804C13.6421 9.37931 13.0561 8.99749 12.411 8.74695L12 9.15698C11.6234 9.53421 11.4119 10.0455 11.4119 10.5785C11.4119 11.1115 11.6234 11.6228 12 12C12.3766 12.3772 12.5881 12.8885 12.5881 13.4215C12.5881 13.9545 12.3766 14.4658 12 14.843L8.44699 18.396C8.06999 18.773 7.55868 18.9849 7.02551 18.9849C6.49235 18.9849 5.98101 18.773 5.604 18.396C5.227 18.019 5.0152 17.5077 5.0152 16.9745C5.0152 16.4413 5.227 15.93 5.604 15.553L8.74701 12.411C8.28705 11.233 8.28705 9.92498 8.74701 8.74695C8.10159 8.99737 7.5152 9.37919 7.02499 9.86804L3.47198 13.421C2.52954 14.3635 2.00009 15.6417 2.00009 16.9745C2.00009 18.3073 2.52957 19.5855 3.47202 20.528C4.41446 21.4704 5.69269 21.9999 7.02551 21.9999C8.35833 21.9999 9.63656 21.4704 10.579 20.528L14.132 16.975C14.5987 16.5084 14.9689 15.9544 15.2215 15.3447C15.4741 14.735 15.6041 14.0815 15.6041 13.4215C15.6041 12.7615 15.4741 12.108 15.2215 11.4983C14.9689 10.8886 14.5987 10.3347 14.132 9.86804Z" fill="currentColor"/></svg></span> Copied!'

        // Revert button label after 3 seconds
        setTimeout(function () {
            lc_target.innerHTML = currentLabel;
        }, 3000)
    })

    bac_target = document.getElementById('business_address_clipboard');
    bac_clipboard = new ClipboardJS(bac_target);
    bac_clipboard.on('success', function(e) {
        const currentLabel = bac_target.innerHTML;
        // Exit label update when already in progress
        if (bac_target.innerHTML === '<span class="svg-icon svg-icon-muted"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.5" d="M18 2H9C7.34315 2 6 3.34315 6 5H8C8 4.44772 8.44772 4 9 4H18C18.5523 4 19 4.44772 19 5V16C19 16.5523 18.5523 17 18 17V19C19.6569 19 21 17.6569 21 16V5C21 3.34315 19.6569 2 18 2Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.7857 7.125H6.21429C5.62255 7.125 5.14286 7.6007 5.14286 8.1875V18.8125C5.14286 19.3993 5.62255 19.875 6.21429 19.875H14.7857C15.3774 19.875 15.8571 19.3993 15.8571 18.8125V8.1875C15.8571 7.6007 15.3774 7.125 14.7857 7.125ZM6.21429 5C4.43908 5 3 6.42709 3 8.1875V18.8125C3 20.5729 4.43909 22 6.21429 22H14.7857C16.5609 22 18 20.5729 18 18.8125V8.1875C18 6.42709 16.5609 5 14.7857 5H6.21429Z" fill="currentColor"/></svg></span> Copied!') {
            return
        }

        // Update button label
        bac_target.innerHTML = '<span class="svg-icon svg-icon-muted"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.5" d="M18 2H9C7.34315 2 6 3.34315 6 5H8C8 4.44772 8.44772 4 9 4H18C18.5523 4 19 4.44772 19 5V16C19 16.5523 18.5523 17 18 17V19C19.6569 19 21 17.6569 21 16V5C21 3.34315 19.6569 2 18 2Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.7857 7.125H6.21429C5.62255 7.125 5.14286 7.6007 5.14286 8.1875V18.8125C5.14286 19.3993 5.62255 19.875 6.21429 19.875H14.7857C15.3774 19.875 15.8571 19.3993 15.8571 18.8125V8.1875C15.8571 7.6007 15.3774 7.125 14.7857 7.125ZM6.21429 5C4.43908 5 3 6.42709 3 8.1875V18.8125C3 20.5729 4.43909 22 6.21429 22H14.7857C16.5609 22 18 20.5729 18 18.8125V8.1875C18 6.42709 16.5609 5 14.7857 5H6.21429Z" fill="currentColor"/></svg></span> Copied!'

        // Revert button label after 3 seconds
        setTimeout(function () {
            bac_target.innerHTML = currentLabel;
        }, 3000)
    })

{% if not request.user.is_authenticated or request.user.user.id != user.id %}

    atc_target = document.getElementById('ask_text_clipboard');
    atc_clipboard = new ClipboardJS(atc_target);
    atc_clipboard.on('success', function(e) {
        const currentLabel = atc_target.innerHTML;
        // Exit label update when already in progress
        if (atc_target.innerHTML === '<span class="svg-icon svg-icon-muted"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.5" d="M18 2H9C7.34315 2 6 3.34315 6 5H8C8 4.44772 8.44772 4 9 4H18C18.5523 4 19 4.44772 19 5V16C19 16.5523 18.5523 17 18 17V19C19.6569 19 21 17.6569 21 16V5C21 3.34315 19.6569 2 18 2Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.7857 7.125H6.21429C5.62255 7.125 5.14286 7.6007 5.14286 8.1875V18.8125C5.14286 19.3993 5.62255 19.875 6.21429 19.875H14.7857C15.3774 19.875 15.8571 19.3993 15.8571 18.8125V8.1875C15.8571 7.6007 15.3774 7.125 14.7857 7.125ZM6.21429 5C4.43908 5 3 6.42709 3 8.1875V18.8125C3 20.5729 4.43909 22 6.21429 22H14.7857C16.5609 22 18 20.5729 18 18.8125V8.1875C18 6.42709 16.5609 5 14.7857 5H6.21429Z" fill="currentColor"/></svg></span> Copied!') {
            return
        }

        // Update button label
        atc_target.innerHTML = '<span class="svg-icon svg-icon-muted"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.5" d="M18 2H9C7.34315 2 6 3.34315 6 5H8C8 4.44772 8.44772 4 9 4H18C18.5523 4 19 4.44772 19 5V16C19 16.5523 18.5523 17 18 17V19C19.6569 19 21 17.6569 21 16V5C21 3.34315 19.6569 2 18 2Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M14.7857 7.125H6.21429C5.62255 7.125 5.14286 7.6007 5.14286 8.1875V18.8125C5.14286 19.3993 5.62255 19.875 6.21429 19.875H14.7857C15.3774 19.875 15.8571 19.3993 15.8571 18.8125V8.1875C15.8571 7.6007 15.3774 7.125 14.7857 7.125ZM6.21429 5C4.43908 5 3 6.42709 3 8.1875V18.8125C3 20.5729 4.43909 22 6.21429 22H14.7857C16.5609 22 18 20.5729 18 18.8125V8.1875C18 6.42709 16.5609 5 14.7857 5H6.21429Z" fill="currentColor"/></svg></span> Copied!'

        // Revert button label after 3 seconds
        setTimeout(function () {
            atc_target.innerHTML = currentLabel;
        }, 3000)
    })

{% endif %}

    






{% if request.user.is_authenticated and request.user.user.id == user.id %}

    // These fields will not be minified because they contain rendered values.
    const uploadStatusImageURL = "{% url 'users:upload_status_file' user.id %}"
    const formUUID = "{{ form_uuid }}"
    const maxFiles = {{ settings.MAX_STATUS_IMAGES }}
    const maxFileSize = {{ settings.MAX_STATUS_IMAGE_FILE_SIZE_IN_BYTES }}
    const deleteStatusImageURL = "{% url 'users:delete_status_file' user.id %}"

    // We use hidden fields to bridge JQuery and Alpine JS.
    const numFilesProcessing = $('#num_files_processing')
    const numFilesSuccess = $('#num_files_success')
    const numFilesError = $('#num_files_error')
    const numFilesRemoved = $('#num_files_removed')

    // Helper function to return the number of images in upload.
    function numFilesUploading() {
        // Removed = Success + Error
        a = parseInt(numFilesProcessing.val()) - parseInt(numFilesRemoved.val())
        b = parseInt(numFilesProcessing.val()) - parseInt(numFilesSuccess.val()) - parseInt(numFilesError.val())
        if (a > b) { return b }
        return a
    }

    // Helper function to increment number of images processing
    function plusNumFilesProcessing() {
        numFilesProcessing.val(parseInt(numFilesProcessing.val()) + 1)
    }

    // Helper function to increment number of images removed
    function plusNumFilesRemoved() {
        numFilesRemoved.val(parseInt(numFilesRemoved.val()) + 1)
    }

    // Helper function to increment number of images error
    function plusNumFilesError() {
        numFilesError.val(parseInt(numFilesError.val()) + 1)
    }

    // Helper function to increment number of images success
    function plusNumFilesSuccess() {
        numFilesSuccess.val(parseInt(numFilesSuccess.val()) + 1)
    }

    // Helper function to generate UUID.
    function uuidv4() {
        return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
        )
    }

    // Enable save button (if conditions are right).
    function enableSave() {
        if ($('#status').val().length > 0 && numFilesUploading() <= 0) {
            $('#save').removeAttr('disabled')
        }
    }

    // Disable save button
    function disableSave() {
        $('#save').attr('disabled', true)
    }
    
    var status_dropzone = new Dropzone("#status_dropzone", {
        url: uploadStatusImageURL,
        params: { form_uuid: formUUID },
        paramName: "file",
        acceptedFiles: "image/*",
        maxFiles: maxFiles,
        maxFilesize: maxFileSize,
        addRemoveLinks: true,
        renameFile: function (file) {
            uuid = uuidv4()
            return uuid
        },
        init: function () {
            this.on("processing", function (file) {
                disableSave()
                plusNumFilesProcessing()
            })

            this.on("success", function (file, response) {
                plusNumFilesSuccess()
                enableSave()
            })

            this.on("error", function (file, error, xhr) {
                plusNumFilesError()
                enableSave()
            })

            this.on("removedfile", function (file, error, xhr) {
                let headers = new Headers()
                headers.append('Accept', 'application/json')
                headers.append('Content-Type', 'application/json')
                fetch(
                    deleteStatusImageURL, {
                    method: 'POST',
                    mode: 'same-origin',
                    credentials: 'include',
                    redirect: 'follow',
                    headers: headers,
                    body: JSON.stringify({
                        file_uuid: file.upload.filename,
                        form_uuid: formUUID
                    })
                })

                // We put these functions outside fetch.then because hiding the
                // form will trigger the remove callback if there are images
                // in the dropzone.
                plusNumFilesRemoved()
                enableSave()
            })
        }
    })

{% endif %}





    {% comment %} introJs().setOptions({
        steps: [{
          intro: "share-button"
        }, {
          element: document.querySelector('#share-button'),
          intro: "Click here to login!"
        }]
      }).start(); {% endcomment %}
})
</script>
{% endblock %}