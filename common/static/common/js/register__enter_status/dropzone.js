$(document).ready((function(){const e=$("#num_file_processing"),n=$("#num_file_success"),t=$("#num_file_error"),i=$("#num_file_removed");function s(){$("#status").val().length>0&&(a=parseInt(e.val())-parseInt(i.val()),b=parseInt(e.val())-parseInt(n.val())-parseInt(t.val()),(a>b?b:a)<=0)&&$("#submit").removeAttr("disabled")}new Dropzone("#status_dropzone",{url:uploadStatusImageURL,params:{form_uuid:formUUID},paramName:"file",acceptedFiles:"image/*",maxFiles:maxFiles,maxFilesize:maxFileSize,addRemoveLinks:!0,renameFile:function(e){return uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))),uuid},init:function(){this.on("processing",(function(a){$("#submit").attr("disabled",!0),e.val(parseInt(e.val())+1)})),this.on("success",(function(e,a){n.val(parseInt(n.val())+1),s()})),this.on("error",(function(e,a,n){t.val(parseInt(t.val())+1),s()})),this.on("removedfile",(function(e,a,n){let t=new Headers;t.append("Accept","application/json"),t.append("Content-Type","application/json"),fetch(deleteStatusImageURL,{method:"POST",mode:"same-origin",credentials:"include",redirect:"follow",headers:t,body:JSON.stringify({file_uuid:e.upload.filename,form_uuid:formUUID})}),i.val(parseInt(i.val())+1),s()}))}})}));