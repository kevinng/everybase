{% extends 'extendables/form.html' %}

{% block form %}
<form class="form">
    <div class="card-body">
        <div class="form-group">
            <label>Credits Left</label>
            <p class="form-control-plaintext font-size-lg font-weight-boldest">500<span class="label label-danger label-inline font-weight-bolder ml-2">Insufficient</span></p>
        </div>

        <div class="form-group">
            <label>Referral Cost</label>
            <p class="form-control-plaintext font-size-lg font-weight-boldest">25</p>
        </div>
    </div>

    <div class="card-footer">
        <p class="font-size-lg font-weight-boldest">Purchase buyer's contact?</p>

        <a href="#" class="btn btn-secondary col-5 col-md-2 mr-2">Back</a>
        <button type="submit" class="btn btn-primary col-5 col-md-2">Purchase</button>

        <span class="form-text text-danger">You'll be directed to top-up credits.</span>
    </div>
</form>
{% endblock %}


{% block local_script %}
<script>
    $(document).ready(function(){
        $(":input").inputmask();
    });

    $("#register_email").inputmask({
        mask: "*{1,20}[.*{1,20}][.*{1,20}][.*{1,20}]@*{1,20}[.*{2,6}][.*{1,2}]",
        greedy: false,
        onBeforePaste: function (pastedValue, opts) {
        pastedValue = pastedValue.toLowerCase();
            return pastedValue.replace("mailto:", "");
        },
        definitions: {
        '*': {
                validator: "[0-9A-Za-z!#$%&'*+/=?^_`{|}~\-]",
                cardinality: 1,
                casing: "lower"
            }
        }
    });

    update_full_number = function() {
        $("#register_full_number").text($("#register_country_code").val() + " "
            + $("#register_national_number").val()) 
    }

    $("#register_country_code").keypress(function() {
        update_full_number();
    });

    $("#register_national_number").keypress(function() {
        update_full_number();
    });
</script>
{% endblock %}