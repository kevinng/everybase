{% extends 'extendables/base.html' %}

{% load static %}

{% load widget_tweaks %}

{% block title %}
    Edit Document
{% endblock %}

{% block content_header %}
    <form method="post" action="{% url 'documents:edit' document.id %}">
        {% csrf_token %}
{% endblock %}

{% block subtitle %}
    Edit Document
{% endblock %}

{% block toolbar %}
    <a href="{% url 'documents:details' document.id %}" class="btn btn-warning">Cancel</a>
    <button type="submit" class="btn btn-success">Apply Changes</button>
{% endblock %}

{% block content %}
mmmm
{% if form.errors %}
<div id="form-error">
	<p>The operation could not be performed because one or more error(s) occurred.<br />Please resubmit the form after making the following changes:</p>
	<ul>
	{% for field in form %}
	<li>{{ field.errors|striptags }}</li>
	{% endfor %}
	</ul>
</div>
{% endif %}
xxx


    <div class="kt-container kt-grid__item kt-grid__item--fluid">
        <div class="kt-portlet kt-portlet--mobile">
            <div class="kt-portlet__body">
                <div class="row">
                    <div class="col-lg-3 form-group">
                        <label>Document Type</label>
                        {{ form.document_type|add_class:"form-control"|add_class:"kt-selectpicker"|add_error_class:"is-invalid"|attr:"id:document__document_type"|attr:"data-size:7"|attr:"data-live-search:true" }}
                        {% if form.document_type.errors %}
                            <div class="invalid-feedback">{% for error in form.document_type.errors %}{{ error }} {% endfor %}</div>
                        {% endif %}
                    </div>
                    <div class="col-lg-4 form-group">
                        <label>Material Name</label>
                        <select id="document__material_name" class="form-control kt-selectpicker" data-size="7" data-live-search="true">
                            {% for material in materials %}
                                <option value="{{ material.id }}">{{ material.name }}</option>
                            {% endfor %}
                        </select>
                        {% if form.material.errors %}
                            <div class="invalid-feedback">{% for error in form.material.errors %}{{ error }} {% endfor %}</div>
                        {% endif %}
                    </div>
                    <div class="col-lg-3 form-group">
                        <label>Material Code</label>
                        <select id="document__material_code" class="form-control kt-selectpicker" data-size="7" data-live-search="true">
                            {% for material in materials %}
                                <option value="{{ material.id }}">{{ material.code }}</option>
                            {% endfor %}
                        </select>
                        {% if form.material.errors %}
                            <div class="invalid-feedback">{% for error in form.material.errors %}{{ error }} {% endfor %}</div>
                        {% endif %}
                    </div>
                </div>
                <span id='document__batch_code_span' class="kt-hidden">
                    <div class="kt-separator kt-separator--portlet-fit"></div>
                    <div class="row">
                        <div class="col-lg-3 form-group">
                            <label class="form-control-label">Batch Code</label>
                            {{ form.batch_code|add_class:"form-control"|add_error_class:"is-invalid" }}
                            {% if form.batch_code.errors %}
                                <div class="invalid-feedback">{% for error in form.batch_code.errors %}{{ error }} {% endfor %}</div>
                            {% endif %}
                        </div>
                    </div>
                </span>
            </div>
        </div>

        <div id="document__document_file"></div>

        {{ form.file_id|attr:"id:document__file_id" }}
        {{ form.material_id|attr:"id:document__material_id" }}
    </div>
{% endblock %}

{% block content_footer %}
    </form>
{% endblock %}

{% block page_level_scripts %}
    <script src="{% static 'common/assets/js/pages/crud/forms/widgets/select2.js' %}" type="text/javascript"></script>
    <script src="{% static 'common/assets/plugins/pdfobject/pdfobject.min.js' %}" type="text/javascript"></script>
    {% include 'documents/js/document.js' %}
{% endblock %}